<?xml version="1.0" encoding="UTF-8"?> <rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"> <channel> <title>Kevin Liu</title> <description>I'm a student at Stanford. This is my website! </description> <link>https://kliu.io</link> <atom:link href="https://kliu.io/feed.xml" rel="self" type="application/rss+xml"/> <item> <title>How do you find your people, when searching is itself an antipattern?</title> <description>&lt;!-- Output copied to clipboard! --&gt; &lt;!----- Yay, no errors, warnings, or alerts! Conversion time: 0.449 seconds. Using this Markdown file: 1. Paste this output into your source file. 2. See the notes and action items below regarding this conversion run. 3. Check the rendered output (headings, lists, code blocks, tables) for proper formatting and use a linkchecker before you publish this page. Conversion notes: * Docs to Markdown version 1.0β33 * Sat Oct 15 2022 22:23:05 GMT-0700 (PDT) * Source doc: Searching for community when searching is an antipattern -----&gt; &lt;p&gt;&lt;em&gt;From the archives of posts which are basically reflections and that I might never post at all. Strongly relates to: To Optimize, Don’t Optimize, yet to be published.&lt;/em&gt;&lt;/p&gt; &lt;p&gt;If you want to meet and talk to cool people, your first thought might be… to try to meet cool people. Like, at a meetup or something, maybe? So then, &lt;strong&gt;why are the cool people so rarely at the obvious venues&lt;/strong&gt;: founder hangouts, dating app queues, online meetups and events?&lt;/p&gt; &lt;p&gt;[Note: In the next few examples, I’m going to try to point at some vibes that I sometimes get. Obviously, there are exceptions to each of the following statements, and they’re only true to varying degrees. Confidence exaggerated for effect.]&lt;/p&gt; &lt;p&gt;Here’s a very cynical take: entrepreneurs at founder meetups in SF are almost never successful founders (or, most likely, even those to-be-successful), because if they were, they wouldn’t have time to go. People on dating apps have more flaws than the average, because if they were naturally appealing, they’d already be in a relationship.&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; People who go to publicly-listed meetups aren’t good at socializing and hence lack a solid social circle, because if they were, they’d already have a social surplus and be overwhelmed with higher-signal unlisted events from friends. People who apply to online job applications are not people you want to hire, and so on.&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt; The act of trying in the most obvious manner is an anti-signal, because nobody who’s actually good &lt;em&gt;needs&lt;/em&gt; to try like that. They have better backdoors.&lt;/p&gt; &lt;p&gt;Of course, this can’t be entirely true. Somehow, people start at the beginning and slowly meet cooler people. But I think it’s &lt;em&gt;mostly&lt;/em&gt; true. In that case, how do people improve?&lt;/p&gt; &lt;h2 id=&quot;how-do-you-escape-social-mediocrity&quot;&gt;How do you escape social mediocrity?&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;Partial Answer 1:&lt;/strong&gt; Be or become legibly better than everyone else in some measurable way. If you have 100% on LeetCode, score 170 IQ, and cure cancer, you’ll get noticed even if you pick the noisiest default channel to present yourself on. If you’re really attractive, you’ll get noticed just as you go through life.&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Partial Answer 2:&lt;/strong&gt; Make your own backdoor, by choosing &lt;em&gt;not to directly optimize&lt;/em&gt; for the obvious thing (meeting people, dating, hiring, investing) and instead exposing yourself to unadulterated human potential through events orthogonal to what you really want. Instead of holding founder-VC dinners, run hackathons. Instead of going on dating apps, just meet people while rock climbing.&lt;/p&gt; &lt;p&gt;This lets you sample for whatever population you want, rather than the (probably lower quality) slice of people who are also desperately optimizing alongside you, at the cost of false positives, since not everyone who attends will have the same goals you do. This is a downside compared to the direct optimization approach. However, this also allows &lt;em&gt;you&lt;/em&gt; to show other aspects of yourself, beyond those that are legibly targeted at the direct goal. You might not have a perfect LeetCode score, but if you befriend the Meta recruiter at the bar through witty commentary, you’ve effectively gotten a backdoor into being &lt;a href=&quot;https://benjaminreinhardt.com/networking-for-nerds/&quot;&gt;remembered&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Of course, do this too much and quite rapidly your VC-sponsored hackathon becomes a transparent recruiting event, as are most corporate events these days. Why is that? Why did optimizing hurt the very thing we wanted to achieve?&lt;/p&gt; &lt;h2 id=&quot;the-economic-viewpoint&quot;&gt;The economic viewpoint&lt;/h2&gt; &lt;p&gt;Another view explaining the above: everything is a market, and markets follow the efficient market hypothesis. If it were possible to find or host a public event that Really Attracted Interesting People Every Time, it’d be swarmed and rapidly be filled by uninteresting people. So much like the market, all public alpha rapidly becomes worthless. The intrinsic difficulty of recruiting is perhaps to continuously locate nonobvious slices of the world that capture the demographics you want; it’s a delicate balance between optimization and over-exploitation.&lt;/p&gt; &lt;p&gt;But that doesn’t mean you can’t find gaps in the market: places where cool people congregate that aren’t known to most. And considering most people don’t explicitly optimize social dynamics vs. e.g. the stock market, there are probably a lot of gaps, if you can find them.&lt;sup id=&quot;fnref:3&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:3&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt; &lt;p&gt;This is why colleges, local neighborhoods, Twitter bubbles, workplaces, and any other assorted niches are good: the market is so small as to be entirely unoptimized. That’s why I can sneak into an EA party and suddenly be talking to &lt;strong&gt;HARM TO ONGOING MATTER&lt;/strong&gt;. This is also why dating / making friends locally, or through school, is (or &lt;a href=&quot;https://putanumonit.com/2021/11/18/10-reasons-lazy-dating/&quot;&gt;was&lt;/a&gt;) good.&lt;/p&gt; &lt;h2 id=&quot;corollaries&quot;&gt;Corollaries&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;Openness is inversely proportional to quality: Online events &amp;lt; public regional meetups &amp;lt; campus-wide activities &amp;lt; private exclusive events.&lt;/li&gt; &lt;li&gt;Formality is inversely proportional to quality (less formal = less optimized): Hiring fairs &amp;lt; arranged one-on-ones &amp;lt; coffee chats &amp;lt; &lt;em&gt;actually&lt;/em&gt; spontaneous coffee chats between friends.&lt;/li&gt; &lt;li&gt;This is why flirting is socially preferred compared to asking someone out point-blank. By giving yourself plausible deniability, you’re taking yourself out of the class of desperate optimizer-y people who do the default action.&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;unsolved-problems&quot;&gt;Unsolved problems&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;How does intrinsic motivation play into this? Why do people so often observe that increasing your own self confidence makes you more attractive (in all ways) to others?&lt;/li&gt; &lt;li&gt;How does availability play into this? How do you know that you’re in a rock climbing group with people actually open to new connections vs one where it’s only for climbing?&lt;/li&gt; &lt;li&gt;How do you pick places that actually have slices of humans you like? Essentially, how do you find your people?&lt;/li&gt; &lt;li&gt;Is it possible to optimize (select well on a large scale) while not destroying quality? Is there perhaps an automated way of vetting the masses, or is this really a thing that will forever remain &lt;em&gt;only&lt;/em&gt; in the domain of ad-hoc, unoptimized human interaction?&lt;/li&gt; &lt;/ul&gt; &lt;!-- Footnotes themselves at the bottom. --&gt; &lt;h2 id=&quot;notes&quot;&gt;Notes&lt;/h2&gt; &lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt; &lt;ol&gt; &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;&lt;a href=&quot;https://sashachapin.substack.com/p/some-non-mainstream-tips-for-meeting&quot;&gt;See Sasha Chapin&lt;/a&gt;. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;A friend reports a similar example: You can’t find the mycology experts on Meetup.com. You have to go through weird backchannels and random introductions via someone you met at a party that one time. &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:3&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;Hmm, what’s the index fund of social interaction? Going to church? &lt;a href=&quot;#fnref:3&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/div&gt; </description> <pubDate>Sat, 15 Oct 2022 00:00:00 +0000</pubDate> <link>https://kliu.io/post/searching-for-community/</link> <guid isPermaLink="true">https://kliu.io/post/searching-for-community/</guid> </item> <item> <title>Deep okayness as a subjective choice of beliefs</title> <description>&lt;!-- Output copied to clipboard! --&gt; &lt;!----- You have some errors, warnings, or alerts. If you are using reckless mode, turn it off to see inline alerts. * ERRORs: 0 * WARNINGs: 0 * ALERTS: 1 Conversion time: 0.513 seconds. Using this Markdown file: 1. Paste this output into your source file. 2. See the notes and action items below regarding this conversion run. 3. Check the rendered output (headings, lists, code blocks, tables) for proper formatting and use a linkchecker before you publish this page. Conversion notes: * Docs to Markdown version 1.0β33 * Sun Sep 04 2022 17:40:28 GMT-0700 (PDT) * Source doc: Deep okayness is a subjective choice of beliefs * This document has images: check for &gt;&gt;&gt;&gt;&gt; gd2md-html alert: inline image link in generated source and store images to your server. NOTE: Images in exported zip file from Google Docs may not appear in the same order as they do in your doc. Please check the images! -----&gt; &lt;p&gt;What separates people who are content from those who aren’t?&lt;/p&gt; &lt;p&gt;Tl; dr: glass half full.&lt;/p&gt; &lt;p&gt;Ok, it’s a myriad of &lt;a href=&quot;https://www.youtube.com/watch?v=76JRJ90s548&quot;&gt;nonlinear causal&lt;/a&gt; factors and luck, but I propose one factor that might be particularly important: They have a different set of unfalsifiable beliefs about the world that make them &lt;a href=&quot;https://sashachapin.substack.com/p/how-i-attained-persistent-self-love&quot;&gt;deeply okay&lt;/a&gt; with whatever happens to them. This makes them more likely to experiment, try new things, or meet new people, and hence they get more tries to find what they enjoy than most people.&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; Plus, even when they fail, they aren’t too disheartened because they’re willing to try again.&lt;/p&gt; &lt;p&gt;Beliefs that are actually real and lead to falsifiable predictions:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;I can drive to Berkeley in 40 minutes (answer: no)&lt;/li&gt; &lt;li&gt;I know or don’t know X skill &lt;em&gt;right now&lt;/em&gt;.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Beliefs that are maybe falsifiable, but in practice depend mostly on yourself and how hard you try,&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt; or on deep motives of others that are effectively impossible to falsify:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Most people I’m interacting with at this dinner are just here for soulless networking and not to actually make friends.&lt;/li&gt; &lt;li&gt;If I join this event, people will feel slightly uncomfortable because I’ve never been here before.&lt;/li&gt; &lt;li&gt;When I try something new, I’m more likely to fail than [someone else who seems naturally talented at learning something new].&lt;/li&gt; &lt;li&gt;I probably can’t learn X skill in 3 months.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Now, consider a different set of beliefs:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;People here are super memey and, despite being naturally good at networking, are also very friendly.&lt;/li&gt; &lt;li&gt;The people at this event are excited when new people join because they like to see newbies learn their activity.&lt;/li&gt; &lt;li&gt;I’ve successfully learned new skills before, so this time is no different.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;&lt;img src=&quot;https://kliu.io/assets/img/deep-okayness/that-is-why-you-fail-quote-1.jpeg&quot; alt=&quot;Luke: &amp;quot;I don&apos;t believe it...&amp;quot; Yoda: &amp;quot;That is why you fail.&amp;quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;Both of these sets of beliefs can mostly explain anything. E.g. if someone is rude to you at the event, it’s (a) a sign of greater enmity from others; or (b) that guy was just a jerk and everyone else is nice. Also, in many of these beliefs &lt;em&gt;your actions affect whether or not they’ll be true&lt;/em&gt;. If you believe you can learn a skill in 3 months, you’re much more likely to do so than someone who doesn’t, because you’ll try harder. It’s &lt;a href=&quot;https://csl4d.wordpress.com/2018/06/09/linear-and-non-linear-causality/&quot;&gt;reverse causality&lt;/a&gt; at work. Thus, it’s hard to say either set of beliefs is &lt;em&gt;better&lt;/em&gt;, because they’ll probably be mostly right if you believe each of them.&lt;/p&gt; &lt;p&gt;The most obvious example is “Today was a bad day.” It only is if you &lt;em&gt;believe it is&lt;/em&gt;, because you might instead believe that there’s &lt;a href=&quot;https://www.lesswrong.com/posts/5wMcKNAwB6X4mp9og/that-alien-message&quot;&gt;something to be learned from any experience&lt;/a&gt;, “good” or “bad.”&lt;/p&gt; &lt;p&gt;Since neither set of beliefs has a better track record, maybe it’s better to just believe the world is nice.&lt;sup id=&quot;fnref:3&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:3&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt; &lt;h2 id=&quot;a-scattering-of-other-good-thoughts&quot;&gt;A scattering of other good thoughts&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://mindingourway.com/half-assing-it-with-everything-youve-got/&quot;&gt;Half-assing it with everything you’ve got&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://sashachapin.substack.com/p/how-i-attained-persistent-self-love&quot;&gt;How I Attained Persistent Self-Love, or, I Demand Deep Okayness For Everyone&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;!-- Footnotes themselves at the bottom. --&gt; &lt;h2 id=&quot;notes&quot;&gt;Notes&lt;/h2&gt; &lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt; &lt;ol&gt; &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;&lt;a href=&quot;https://review.firstround.com/classpass-founder-on-how-marketplace-startups-can-achieve-product-market-fit&quot;&gt;More darts to throw at the board&lt;/a&gt; of person-environment fit, one might say. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;Aka, &lt;a href=&quot;https://www.lesswrong.com/tag/embedded-agency&quot;&gt;embedded agency&lt;/a&gt; (Yoda Do or Do Not). &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:3&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;Caveat: &lt;del&gt;I have no idea how to do this&lt;/del&gt; Figuring out how to do this is outside the scope of this post. As always, if the problem seems simple, &lt;a href=&quot;https://guzey.com/advice/&quot;&gt;it’s probably very hard to fix&lt;/a&gt;. &lt;a href=&quot;#fnref:3&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/div&gt; </description> <pubDate>Sun, 04 Sep 2022 00:00:00 +0000</pubDate> <link>https://kliu.io/post/deep-okayness/</link> <guid isPermaLink="true">https://kliu.io/post/deep-okayness/</guid> </item> <item> <title>Cooperating in everyday stag hunts</title> <description>&lt;p&gt;There’s a certain type of multi-agent interaction in society where you’re presented with two choices: a default option that’s easy and beneficial for you, and a hard option that results in pain for you but is more “moral”/”ethical”/”prosocial.” If everyone picks the hard option, then society as a whole can move out of a bad equilibrium and improve things globally. For example:&lt;/p&gt; &lt;ol&gt; &lt;li&gt;Using Linux / Android vs. Apple in California&lt;/li&gt; &lt;li&gt;Being vegetarian when all your friends eat meat&lt;/li&gt; &lt;li&gt;Using a &lt;a href=&quot;https://youtube.com/NotJustBikes&quot;&gt;bike or public transit instead of driving&lt;/a&gt; when you don’t live in a major US city&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;It’s a &lt;a href=&quot;https://www.google.com/search?q=stag+hunt+wikipedia&amp;amp;oq=stag+hunt+wikipedia&amp;amp;sourceid=chrome&amp;amp;ie=UTF-8&quot;&gt;stag hunt&lt;/a&gt;, in other words (hunt the stag = the hard option; hunt the rabbit = the easy). One with millions to billions of participants, depending on size.&lt;/p&gt; &lt;p&gt;Should you take the hard path?&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Points against&lt;/strong&gt;: So many people take the default. Your choice to bike instead of drive will only increase your travel time. It’s best to concentrate your efforts in places that are amenable to fixing &lt;a href=&quot;https://equilibriabook.com/&quot;&gt;inadequate equilibria&lt;/a&gt;. Have some &lt;a href=&quot;https://forum.effectivealtruism.org/posts/WKPd79PESRGZHQ5GY/in-defence-of-epistemic-modesty&quot;&gt;epistemic modesty&lt;/a&gt; and defer to the crowd. Go with the flow.&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Points for:&lt;/strong&gt; If you just accept things as they are, you’re an undifferentiated human being. It feels like to be interesting, there’s &lt;em&gt;something&lt;/em&gt; that you need to take a stand on.&lt;/p&gt; &lt;p&gt;Also, individual action as a notion is a bad abstraction. Actual change is systemic, not individual. It’s orders of magnitude more effective to donate $1,000 to a climate charity than to have a low-carbon lifestyle. And even beyond donating, the biggest changes occur through groups motivated to create change, not lone wolves. Think &lt;a href=&quot;https://reboothq.substack.com/&quot;&gt;Reboot&lt;/a&gt;-style community and techno-optimism.&lt;/p&gt; &lt;p&gt;So yes. If all your other friends have cars, buy your car. Don’t sacrifice when it’s really inconvenient to do so, because that’s just masochistic. But if you can find a group of likeminded people for a cause you care about? Don’t back down.&lt;/p&gt; </description> <pubDate>Sat, 09 Jul 2022 00:00:00 +0000</pubDate> <link>https://kliu.io/post/everyday-stag-hunts/</link> <guid isPermaLink="true">https://kliu.io/post/everyday-stag-hunts/</guid> </item> <item> <title>John Gall, Systemantics</title> <description>&lt;p&gt;There’s a certain category of book that talks not about factual events or information, but about &lt;em&gt;vibes&lt;/em&gt; – ways in which to think about the world, archetypes that slightly tweak your inner neural predictor rather than create a hard decision boundary. This is definitely one of them. Also, it’s super meme, which makes it even better.&lt;/p&gt; &lt;p&gt;The vibes that this book espouses:&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;Complex systems are all around us. They’re watching you. Right now.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Nonlinear causality&lt;/strong&gt;. Simple or “obvious” interventions are likely to backfire in the worst way possible. People usually think in linear cause-and-effect, but in fact the real world often operates counterintuitively and according to &lt;a href=&quot;https://www.youtube.com/watch?v=76JRJ90s548&quot;&gt;nonlinear causality&lt;/a&gt;.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Intrasystem goals&lt;/strong&gt;. Systems will take on their own goals, and they will conspire against you. A performance management system is likely to backfire because of unavoidable distortion of incentives (instead of working, I’m writing my performance review or OKRs).&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Big systems are different&lt;/strong&gt;. Systems qualitatively change in behavior when they expand by an order of magnitude. See &lt;a href=&quot;https://www.oreilly.com/library/view/designing-data-intensive-applications/9781491903063/ch01.html&quot;&gt;scaling large distributed systems&lt;/a&gt;, &lt;a href=&quot;https://arxiv.org/abs/2205.10343&quot;&gt;ML grokking&lt;/a&gt;, &lt;a href=&quot;https://www.accessmagazine.org/spring-2017/the-access-almanac-traffic-congestion-is-counter-intuitive-and-fixable/&quot;&gt;highways&lt;/a&gt;.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Winning&lt;/strong&gt;. In very obscure edge cases, you can gain an upper hand on the system and win. No easy trick is given for this, likely because the solution requires a bundle of good heuristics rather than an &lt;a href=&quot;https://en.wikipedia.org/wiki/Expert_system&quot;&gt;expert rule&lt;/a&gt;. However, it’s often easier to win when you arrange things such that &lt;a href=&quot;https://www.neelnanda.io/blog/mini-blog-post-19-on-systems-living-a-life-of-zero-willpower&quot;&gt;victory becomes the default path rather than requiring effort&lt;/a&gt;, like a &lt;a href=&quot;https://en.wikipedia.org/wiki/Gravity_assist&quot;&gt;gravity assist versus a direct transfer maneuver&lt;/a&gt;.&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;p&gt;I’d like to read more books that espouse vibes rather than facts, especially books that support vibes by giving a diversity of examples like this one.&lt;/p&gt; &lt;h2 id=&quot;good-quotes&quot;&gt;good quotes&lt;/h2&gt; &lt;blockquote&gt; &lt;p&gt;COMPLICATED SYSTEMS SELDOM EXCEED FIVE PERCENT EFFICIENCY.&lt;/p&gt; &lt;/blockquote&gt; &lt;blockquote&gt; &lt;p&gt;Harvard Law of Animal Behavior: Under precisely controlled experimental conditions, a test animal will behave as it damn well pleases.&lt;/p&gt; &lt;/blockquote&gt; &lt;blockquote&gt; &lt;p&gt;Am I, unbeknownst to myself, a Systems-person? The answer is always, Yes. The relevant question is simply, Which System?&lt;/p&gt; &lt;/blockquote&gt; &lt;blockquote&gt; &lt;p&gt;A COMPLEX SYSTEM DESIGNED FROM SCRATCH NEVER WORKS AND CANNOT BE MADE TO WORK. YOU HAVE TO START OVER, BEGINNING WITH A WORKING SIMPLE SYSTEM.&lt;/p&gt; &lt;/blockquote&gt; &lt;blockquote&gt; &lt;p&gt;In brief, there can be NO SYSTEM WITHOUT ITS OBSERVER and NO OBSERVATION WITHOUT ITS EFFECTS.&lt;/p&gt; &lt;/blockquote&gt; &lt;h2 id=&quot;related-books-and-media&quot;&gt;related books and media&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;em&gt;The Mythical Man-Month&lt;/em&gt; (complex systems from the lens of software project management)&lt;/li&gt; &lt;li&gt;&lt;em&gt;Air Crash Investigation&lt;/em&gt; (complex causes of clearly obvious failures)&lt;/li&gt; &lt;li&gt;Complexity theory in general, probably&lt;/li&gt; &lt;/ul&gt; </description> <pubDate>Thu, 09 Jun 2022 00:00:00 +0000</pubDate> <link>https://kliu.io/post/systemantics/</link> <guid isPermaLink="true">https://kliu.io/post/systemantics/</guid> </item> <item> <title>Ken Liu, The Hidden Girl and Other Stories</title> <description>&lt;ul&gt; &lt;li&gt;&lt;strong&gt;Overall thoughts&lt;/strong&gt;: Beautiful meta-narrative and an interesting depiction of the AI “AU” (instead of superintelligent ML, we use brain recording + usage for automation). I loved how even in technological extremes and singularities, he still depicts a humanized story.&lt;/li&gt; &lt;li&gt;Special likes &lt;ul&gt; &lt;li&gt;The Reborn &lt;ul&gt; &lt;li&gt;Their moral quandry feels very similar to humanity now‒we’re trapped by our past and our systems (are we evil for enslaving people? eating animals now even though it may be immoral? destroying the climate? allowing dictatorships to exist even though they are stable?)&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;Thoughts and Prayers &lt;ul&gt; &lt;li&gt;Reminds me of &lt;ul&gt; &lt;li&gt;“Is This You?” - lifelogging, privacy and scandal by Tom Scott at Electromagnetic Field 2012 www.youtube.com/watch?v=WcPhMqLPuvQ&lt;/li&gt; &lt;li&gt;&amp;lt;A short story I can’t recall about someone whose YouTube girlfriend dies&amp;gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;Byzantine Empathy &lt;ul&gt; &lt;li&gt;Blockchain ideology was on point and encapsulates a bit of why the systemic change supporters advocate for today seems hard to achieve. A lot of ideology, less in concrete plans and an understanding of how to improve its flaws.&lt;/li&gt; &lt;li&gt;Ironically though (unlike proof-of-work), there’s no convergence on who made the right moral choice. Life is too complex of a system to either act fully emotionally (Jianwen) or attempt to deduce everything from linearly causal reasoning (rationality; Sophia). Maybe the correct answer is something in the middle. Regardless, people still act, and consequences play out.&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;Real Artists &lt;ul&gt; &lt;li&gt;Love the gradient descent for movie generation + human feedback as analogy for how AI is going to affect art in the future.&lt;/li&gt; &lt;li&gt;Is this not what we’ve done all along, though? A microcosm of cinematography in 50 hours. Just in a less explicit sense. Seems like many beautiful things in the world don’t stand up to optimization.&lt;/li&gt; &lt;li&gt;The sad thing is that even this is probably too humanist of a depiction. In the future, movie-generating AIs will probably use human reward models learned in silicon. Somewhat sad that the most likely futures don’t make for good stories (and what does that say about how we’ll feel once we live them?).&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;Staying Behind &lt;ul&gt; &lt;li&gt;More thoughts, but I appreciate on a deep level the data center being built in Svalbard.&lt;/li&gt; &lt;li&gt;Horrifying that robust economic processes might eventually make life unlivable? If the simulation isn’t real, that everyone really dies when they get uploaded, it’s scary how on the margin the risk can be worth it and snowball until all of humanity is irreversibly locked in.&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;Highlights first synced by Readwise May 7th, 2022 &lt;ul&gt; &lt;li&gt;“The past,” Ms. Coron continued, “thus accumulating bit by bit through recursion, becomes the future.” (Location 102)&lt;/li&gt; &lt;li&gt;Gradually, the stock characters came to life, the stock dialogue gained wit and pathos, and a work of art emerged from random noise. (Location 2867)&lt;/li&gt; &lt;li&gt;“Will you be a pearl buried in the mud of the endless East Sea, or will you shine so brightly as to awaken those who only doze through life and light up a mundane world?” (Location 5331)&lt;/li&gt; &lt;li&gt;“Steal his life, and your apprenticeship will be completed,” Teacher said. “This is your last test.” “What has he done that he deserves to die?” I asked. (Location 5403)&lt;/li&gt; &lt;li&gt;“You may think width, depth, and height are the only dimensions of the world, Hidden Girl, but you’d be wrong. You have lived your life as an ant on a sheet of paper, and the truth is far more wondrous.” (Location 5536)&lt;/li&gt; &lt;li&gt;don’t tell her that I know she doesn’t mean to break her promises to me, but it still hurts when she does. I don’t tell them that I wish I could cut the line that ties me to their wings—the tugging on my heart from their competing winds is too much. (Location 5695)&lt;/li&gt; &lt;li&gt;She cares more about the idea of future generations than her actual children and grandchildren. I know I’m being unfair, but the truth is often unfair. (Location 5754)&lt;/li&gt; &lt;li&gt;“I’m working on a technical solution,” I say. “There is a way for us to transcend this morass, to achieve a just existence.” I am, after all, my mother’s daughter. (Location 5784)&lt;/li&gt; &lt;li&gt;I had once thought the Singularity would solve all our problems. Turns out it’s just a simple hack for a complicated problem. We do not share the same histories; we do not all want the same things. I am not so different from my mother after all. (Location 5830)&lt;/li&gt; &lt;li&gt;The lower-energy photons leap outward into space, somewhat drained after powering a civilization. But before they can escape into the endless abyss of space, they strike another set of plates designed to absorb energy from radiation at this dimmer frequency. And once again, the process for thought-creation repeats itself. (Location 5866)&lt;/li&gt; &lt;li&gt;Come to the galactic center. It’s reunion time. Carefully, I instruct the intelligences (Location 5902)&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; </description> <pubDate>Sun, 08 May 2022 00:00:00 +0000</pubDate> <link>https://kliu.io/post/hidden-girl/</link> <guid isPermaLink="true">https://kliu.io/post/hidden-girl/</guid> </item> <item> <title>Unintuitive conclusions from urban planning</title> <description>&lt;p&gt;Cars are weird. Living in a Massachusetts suburb, I didn’t realize just how car-dependent my area was&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; until spending time in the SF Bay Area, which (while certainly not the pinnacle of transit) offers far more accessible bike and transit options.&lt;/p&gt; &lt;p&gt;This realization has made me quite sad about the current state of affairs, and because of this, I’ve recently fallen into a rabbithole of reading about transit. Here are some rather unintuitive facts about traffic, transit, and urban planning:&lt;/p&gt; &lt;h2 id=&quot;highways-exhibit-highly-nonlinear-congestion&quot;&gt;Highways exhibit highly nonlinear congestion&lt;/h2&gt; &lt;p&gt;&lt;img src=&quot;https://kliu.io/assets/img/unintuitive-results-from-urban-planning/Speed_Volume_WSDOT_2018.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;Figure provided by WSDOT 2018, from &lt;a href=&quot;https://www.strongtowns.org/journal/2020/4/29/what-covid-19-teaches-us-about-how-to-fix-freeways&quot;&gt;Strong Towns&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Let’s suppose you’re trying to maximize the vehicles-per-hour on a highway. As it turns out, adding more cars only improves this until a threshold, at which point it causes capacity to &lt;em&gt;plummet&lt;/em&gt;. This phenomenon is shown in the graph above: as you add more cars, you descend the curve. At the middle, you have the maximum vehicles-per-hour. But as you keep going, the average speed of each car drops due to congestion, so even though &lt;em&gt;more cars are on the highway&lt;/em&gt; at any one time, the total number of cars passing through declines precipitously.&lt;/p&gt; &lt;p&gt;This effect is so large that in Portland’s I-5, the decline in driving from covid slightly reduced the entering traffic volume, which &lt;a href=&quot;https://www.strongtowns.org/journal/2020/4/29/what-covid-19-teaches-us-about-how-to-fix-freeways&quot;&gt;actually allowed &lt;em&gt;more cars overall&lt;/em&gt; to use the highway&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;This is part of why some states/countries have &lt;a href=&quot;https://mtc.ca.gov/operations/programs-projects/freeways/adaptive-ramp-metering&quot;&gt;ramp metering&lt;/a&gt; and why congestion pricing for roads is a really good idea.&lt;/p&gt; &lt;h2 id=&quot;expanding-roads-doesnt-improve-traffic&quot;&gt;Expanding roads doesn’t improve traffic&lt;/h2&gt; &lt;p&gt;This one is pretty well-known but bears repeating. Thanks to &lt;a href=&quot;https://en.wikipedia.org/wiki/Induced_demand&quot;&gt;induced demand&lt;/a&gt;, adding more highway capacity causes more people to use the highway, because it’s now the most convenient option. Hence, the highway becomes more congested until it returns to the steady-state equilibrium of the maximum sadness people are okay with. This is usually when people start getting annoyed at congestion and push for the highway to be expanded.&lt;/p&gt; &lt;p&gt;There is one counterargument to this: even if congestion didn’t get any better, surely we at least were able to transport more people to places they wanted to go? I think the response to this is that while this is true, expanding roads also strengthens the norm that it’s ok to travel 10, or 20, or 30 miles for a brief errand. This &lt;a href=&quot;https://www.strongtowns.org/journal/2021/8/24/does-induced-demand-apply-to-bike-lanes-and-other-questions&quot;&gt;alters the pattern of development&lt;/a&gt; such that people start building destinations further away. If we assume the quality of each destination is the same regardless of theoretical distance, this means we’re having people drive further, and experience equivalent levels of traffic, for the same quality of destination.&lt;/p&gt; &lt;p&gt;That seems bad.&lt;/p&gt; &lt;h2 id=&quot;the-speed-of-public-transit-may-determine-the-speed-of-car-transportation&quot;&gt;The speed of public transit (may*) determine the speed of car transportation&lt;/h2&gt; &lt;p&gt;This is the &lt;a href=&quot;https://en.wikipedia.org/wiki/Downs%E2%80%93Thomson_paradox&quot;&gt;Downs-Thomson Paradox&lt;/a&gt;. Essentially, if cars were faster than public transit, then people would shift to using cars. Thus (assuming perfect substitutability), people would flock to cars until it becomes slower than transit. Public transit hence acts as a ceiling on car travel times.&lt;/p&gt; &lt;p&gt;This implies, similarly to induced demand, that expanding &lt;em&gt;car&lt;/em&gt; infrastructure won’t improve car travel times. In fact, you might want to instead expand &lt;em&gt;transit&lt;/em&gt; infrastructure – &lt;a href=&quot;https://theweek.com/articles/981979/car-supremacy-americas-traffic-paradox&quot;&gt;if you improve non-car transportation options, people will switch from cars to transit, making cars &lt;em&gt;and&lt;/em&gt; transit faster&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;However, is this paradox actually true in practice? It seems somewhat limited. Empirically, I can observe that it takes 22 minutes to drive from Acton to Lowell in Massachusetts, while transit takes &lt;strong&gt;1 hour, 49 min&lt;/strong&gt;. Granted, this is because of design issues on the commuter rail (routes only go into Boston, not radially to other towns), but take another example: Berkeley to Palo Alto. This takes 52 minutes by car and 1 hour, 34 min by train. (Ok, with congestion it takes 1-2 hours by car, which is maybe where the paradox comes in.)&lt;/p&gt; &lt;p&gt;It does seem to be a general trend, though, that &lt;a href=&quot;https://www.visualcapitalist.com/average-commute-u-s-states-cities/&quot;&gt;cars are usually faster than transit in America&lt;/a&gt;. Probably, this is because our transit is so horrendous that the paradox doesn’t even apply because nobody uses transit anyway.&lt;/p&gt; &lt;h2 id=&quot;the-upshot&quot;&gt;The upshot?&lt;/h2&gt; &lt;p&gt;I don’t have any particularly strong conclusions for you, beyond that urban planning is &lt;em&gt;complicated&lt;/em&gt; and very nonintuitive. However, it does seem like car-centric planning is usually bad, for transit &lt;em&gt;and&lt;/em&gt; cars.&lt;/p&gt; &lt;p&gt;Also, I’m not an expert, so if you see anything horrendously wrong please do call it out. Good places to learn more are &lt;a href=&quot;https://strongtowns.org&quot;&gt;Strong Towns&lt;/a&gt; and the YouTube channel &lt;a href=&quot;https://www.youtube.com/c/NotJustBikes/videos&quot;&gt;Not Just Bikes&lt;/a&gt;.&lt;/p&gt; &lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt; &lt;ol&gt; &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;As in, the only road in and out from my house is a single-lane, 40 mph road with no bike route and no sidewalk. The train station (which only has trains every hour) is 5 miles away. Good luck not owning a car here. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/div&gt; </description> <pubDate>Mon, 20 Dec 2021 03:32:44 +0000</pubDate> <link>https://kliu.io/post/unintuitive-results-from-urban-planning/</link> <guid isPermaLink="true">https://kliu.io/post/unintuitive-results-from-urban-planning/</guid> </item> <item> <title>Staying Sane in ML: Fixing Your Terrible Data Science Tools to Improve the Research Experience</title> <description>&lt;p&gt;While machine learning research has made incredible theoretical advances, the day-to-day tools most researchers use are… poorly optimized, to say the least. And much knowledge is locked up in people’s private .bashrc files or wikis. This post aims to shed light on some very useful tools for beginning researchers.&lt;/p&gt; &lt;p&gt;Expected audience: people, likely undergraduates, who are starting to do CS research that is vaguely in the “AI/ML” space. You have joined a Slack and gotten authentication credentials for this thing called a “cluster,” and are probably using Python with Jupyter Notebook.&lt;/p&gt; &lt;h1 id=&quot;goals&quot;&gt;Goals&lt;/h1&gt; &lt;p&gt;When optimizing a development setup, I usually go for convenience and iteration speed. Long build times are &lt;a href=&quot;https://engineering.linkedin.com/blog/2018/07/how-we-improved-build-time-by-400-percent&quot;&gt;known&lt;/a&gt; to be a productivity issue in industry; waiting tens of minutes for Conda to install is similar.&lt;/p&gt; &lt;p&gt;Therefore, most of my recommendations will be geared toward changes that make you work &lt;em&gt;faster&lt;/em&gt; or &lt;em&gt;smarter&lt;/em&gt; (e.g. with more intellisense, or better keybinds).&lt;/p&gt; &lt;h1 id=&quot;hardware&quot;&gt;Hardware&lt;/h1&gt; &lt;h2 id=&quot;google-colab-not-even-once&quot;&gt;Google Colab: not even once&lt;/h2&gt; &lt;p&gt;Google Colab is &lt;em&gt;terrible&lt;/em&gt; for large-scale projects. It’s great for single-notebook prototyping, but the moment you have to edit an external Python file using the &lt;em&gt;Google Drive file interface&lt;/em&gt;, you’ve lost.&lt;/p&gt; &lt;p&gt;Also, Colab’s limits are terrible: constantly getting disconnected and resetting your runtime state are both irritating and a major context loss as you spend time re-running all your cells. A better setup is to run your own GPU computer – be it on &lt;a href=&quot;https://course.fast.ai/start_gcp&quot;&gt;Google Cloud&lt;/a&gt;, &lt;a href=&quot;https://course.fast.ai/start_aws&quot;&gt;AWS&lt;/a&gt;, a computer lying around in your basement, or on your local compute cluster.&lt;/p&gt; &lt;h2 id=&quot;be-aware-of-the-speed-of-your-storage&quot;&gt;Be aware of the speed of your storage&lt;/h2&gt; &lt;p&gt;If you’re using a cluster, it will likely have different &lt;em&gt;tiers of storage&lt;/em&gt; – some will be local on the specific server you’re working on, others will be network storage (NFS, often called something like “dfs”). Before getting started on a project, you should read up on your cluster’s storage and use &lt;strong&gt;the fastest one that can fit your data&lt;/strong&gt;. This sometimes can save many minutes waiting for Conda to install as it thrashes a hard drive on the other side of the computer room over the network.&lt;/p&gt; &lt;h2 id=&quot;make-sure-your-storage-is-backed-up&quot;&gt;Make sure your storage is backed up&lt;/h2&gt; &lt;p&gt;You &lt;em&gt;really&lt;/em&gt; don’t want to lose modified code or datasets. Ensure your cluster has a backup policy, or else upload your data to a second location periodically.&lt;/p&gt; &lt;h1 id=&quot;software&quot;&gt;Software&lt;/h1&gt; &lt;h2 id=&quot;stop-using-conda&quot;&gt;Stop using Conda&lt;/h2&gt; &lt;p&gt;We’ve all seen it.&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;base&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; ~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;conda &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; conda-forge boost Collecting package metadata &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;current_repodata.json&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: &lt;span class=&quot;k&quot;&gt;done &lt;/span&gt;Solving environment: failed with initial frozen solve. Retrying with flexible solve. Solving environment: failed with repodata from current_repodata.json, will retry with next repodata source. Collecting package metadata &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;repodata.json&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: &lt;span class=&quot;k&quot;&gt;done &lt;/span&gt;Solving environment: failed with initial frozen solve. Retrying with flexible solve. Solving environment: &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt; Found conflicts! Looking &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;incompatible packages. This can take several minutes. Press CTRL-C to abort. &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;3 hours pass, your sanity declines by the minute&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Conda is &lt;em&gt;slow&lt;/em&gt;. In a large environment, every time you want to install a new package, it can take &lt;em&gt;multiple minutes&lt;/em&gt; just for it to give you a conflict screen. This kills flow states and is unacceptable for productivity.&lt;/p&gt; &lt;p&gt;It also fails in a few other key aspects:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;strong&gt;Reproducibility&lt;/strong&gt;. If you’re using Conda, you have to go to special lengths to save your environment and every package’s exact version, in case someone else wants to work on the same project later.&lt;/li&gt; &lt;li&gt;&lt;strong&gt;Top-level vs. transitive dependencies&lt;/strong&gt;: There’s this thing in package management called &lt;em&gt;not recording every transitive dependency as if it’s top level&lt;/em&gt;. That is, if you install &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pytorch&lt;/code&gt;, it should not list all of Pytorch’s dependencies as if you installed them personally. Unfortunately, Conda didn’t get the memo.&lt;/li&gt; &lt;/ul&gt; &lt;h3 id=&quot;use-pipenvpoetry-instead&quot;&gt;Use Pipenv/Poetry instead&lt;/h3&gt; &lt;p&gt;Thankfully, the regular Python ecosystem has mostly transcended such limitations. A popular modern package manager is &lt;a href=&quot;https://pipenv.pypa.io/en/latest/&quot;&gt;Pipenv&lt;/a&gt;, which satisfies both the issues above. A similar tool is &lt;a href=&quot;https://python-poetry.org/&quot;&gt;Poetry&lt;/a&gt;, which does the same but often has &lt;a href=&quot;https://johnfraney.ca/posts/2019/03/06/pipenv-poetry-benchmarks-ergonomics/&quot;&gt;slightly better performance&lt;/a&gt; for interactive use.&lt;/p&gt; &lt;p&gt;With this approach, instead of doing &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;conda install numpy&lt;/code&gt;, you replace it with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pipenv install numpy&lt;/code&gt;.&lt;/p&gt; &lt;h3 id=&quot;or-if-you-must-use-mamba--conda-lock&quot;&gt;Or, if you must, use mamba + conda-lock&lt;/h3&gt; &lt;p&gt;Granted, you might not want to use a Python-specific package manager. One of Conda’s key benefits is that it can also install &lt;em&gt;system dependencies&lt;/em&gt; for the packages you want, e.g. installing &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cudatoolkit&lt;/code&gt; along with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pytorch&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;If you find this functionality essential, you should really use &lt;strong&gt;&lt;a href=&quot;https://github.com/mamba-org/mamba&quot;&gt;Mamba&lt;/a&gt;&lt;/strong&gt;. Basically, it’s Conda, but with a 10x faster dependency solver written in C++.&lt;/p&gt; &lt;p&gt;Another useful tool is &lt;a href=&quot;https://github.com/conda-incubator/conda-lock&quot;&gt;conda-lock&lt;/a&gt;, which can generate fully reproducible lock files that work on all platforms. This is useful to ensure your Conda environments are reproducible (recommended workflow &lt;a href=&quot;https://pythonspeed.com/articles/conda-dependency-management/&quot;&gt;here&lt;/a&gt;).&lt;/p&gt; &lt;h2 id=&quot;stop-using-jupyter-notebook&quot;&gt;Stop using Jupyter Notebook&lt;/h2&gt; &lt;p&gt;If you use Jupyter Notebook (not Lab), you should feel bad. It’s simple to set up, but the UI is extremely barebones, making it difficult to jump around different files. Two options are:&lt;/p&gt; &lt;h3 id=&quot;use-jupyter-lab&quot;&gt;Use Jupyter Lab&lt;/h3&gt; &lt;p&gt;&lt;a href=&quot;https://jupyterlab.readthedocs.io/en/stable/&quot;&gt;Jupyter Lab&lt;/a&gt; is basically a slightly fancier Jupyter Notebook. It’s a traditional notebook interface, with tabs and a convenient file tree on the side.&lt;/p&gt; &lt;p&gt;Another thing you should do is to &lt;a href=&quot;https://jupyterlab.readthedocs.io/en/stable/user/interface.html&quot;&gt;read the docs&lt;/a&gt; – Jupyter Lab has a lot of features that I didn’t know about. Like &lt;a href=&quot;https://jupyterlab.readthedocs.io/en/stable/user/interface.html#keyboard-shortcuts&quot;&gt;Vim emulation&lt;/a&gt;. And &lt;a href=&quot;https://jupyterlab.readthedocs.io/en/stable/user/rtc.html&quot;&gt;real-time collaboration&lt;/a&gt;. It’s definitely worth your time.&lt;/p&gt; &lt;h3 id=&quot;use-visual-studio-code&quot;&gt;Use Visual Studio Code&lt;/h3&gt; &lt;p&gt;Visual Studio Code is a &lt;em&gt;surprisingly&lt;/em&gt; good replacement for the Jupyter stack. With the Remote Development Pack, Jupyter, and Pylance extensions, you get a native notebook experience on a remote server while also getting all the benefits of VSCode autocompletion and suggestions.&lt;/p&gt; &lt;p&gt;However, it’s not all sunshine and roses. The Remote-SSH extension is pretty finicky, often spamming reconnection popups whenever you lose network access, and it doesn’t support special cluster logins like SLURM. The Jupyter extension is also going through teething pains, so expect issues like annoying scrolling, cells hanging occasionally, and frozen interfaces.&lt;/p&gt; &lt;p&gt;Still, though, it might all be worth it for that sweet sweet intellisense.&lt;/p&gt; &lt;h2 id=&quot;use-einops-instead-of-explicit-tensor-operations&quot;&gt;Use einops instead of explicit tensor operations&lt;/h2&gt; &lt;p&gt;Look at this, from the readme:&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;einops&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rearrange&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# equivalent expressions &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rearrange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;b c h w -&amp;gt; b (c h w)&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Never more shall you have to memorize what &lt;a href=&quot;https://pytorch.org/docs/stable/generated/torch.repeat_interleave.html&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;torch.repeat_interleave&lt;/code&gt;&lt;/a&gt; does. &lt;a href=&quot;https://github.com/arogozhnikov/einops&quot;&gt;Einops&lt;/a&gt; replaces dozens of PyTorch/numpy/TensorFlow/JAX/more tensor operations with &lt;em&gt;three functions&lt;/em&gt; that can handle everything. Use it – &lt;a href=&quot;https://github.com/arogozhnikov/einops#tweets&quot;&gt;all the cool kids do&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;use-git-well&quot;&gt;Use git well&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;https://chris.beams.io/posts/git-commit/&quot;&gt;Enough said&lt;/a&gt;. As with any form of software engineering, you should follow the best practices of version control, committing legibly, and committing often.&lt;/p&gt; &lt;h2 id=&quot;use-static-types-as-much-as-you-can&quot;&gt;Use static types as much as you can&lt;/h2&gt; &lt;p&gt;Quick! What’s the shape of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src_frames&lt;/code&gt; in this function?&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;convert_padding_direction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;src_frames&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;src_lengths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right_to_left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left_to_right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right_to_left&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left_to_right&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;src_frames&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;src_lengths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;src_frames&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;src_lengths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;eq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# no padding, return early &lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;src_frames&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;utils&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;buffered_arange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unsqueeze&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expand_as&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;src_frames&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_pads&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_len&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;src_lengths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type_as&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unsqueeze&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unsqueeze&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right_to_left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;torch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remainder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_pads&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;torch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remainder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_pads&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;src_frames&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gather&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt; &lt;p&gt;It’s pretty hard to say. Maybe go pass in some test inputs, or trace the rest of the program whenever it uses this function? This debugging process turns a two-minute modification into a twenty-minute one, as you struggle to reverse engineer what the code expects.&lt;/p&gt; &lt;p&gt;That’s why you need something like &lt;a href=&quot;https://github.com/patrick-kidger/torchtyping&quot;&gt;torchtyping&lt;/a&gt; or &lt;a href=&quot;https://github.com/deepmind/tensor_annotations&quot;&gt;TensorAnnotations&lt;/a&gt;. With it, you can write your code like &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;def analyze_image(img: TensorType[&quot;batch&quot;, 3, 224, 224])&lt;/code&gt; and make it much easier for someone else to use the function later. It’ll take 2 seconds of effort upfront and save 2 hours of debugging later.&lt;/p&gt; &lt;h2 id=&quot;write-documentation&quot;&gt;Write documentation&lt;/h2&gt; &lt;p&gt;Similar to the above, when dealing with complex tensor functions or domain-specific operations, it’s very hard to tell what a function does from its name. &lt;em&gt;Write doc comments&lt;/em&gt; that describe the purpose of the function in laymen’s words, and describe all important inputs/outputs (with tensor shapes, if you aren’t using a typing library).&lt;/p&gt; &lt;h2 id=&quot;write-tests-for-crying-out-loud&quot;&gt;Write tests, for crying out loud&lt;/h2&gt; &lt;p&gt;There’s nothing worse than having a massive, amorphous blob of Python code and circular imports. Any touch is likely to break something deep within a long-forgotten notebook or manual script.&lt;/p&gt; &lt;p&gt;To have at least a modicum of confidence, you should write tests (at least smoke tests) to make sure your code works as expected and &lt;em&gt;keeps working as expected&lt;/em&gt;. One good testing library is &lt;a href=&quot;https://pytest.org/&quot;&gt;pytest&lt;/a&gt;; there are also ways to &lt;a href=&quot;https://stackoverflow.com/questions/40172281/unit-tests-for-functions-in-a-jupyter-notebook&quot;&gt;embed tests in Jupyter notebooks&lt;/a&gt;.&lt;/p&gt; &lt;h3 id=&quot;automate-as-much-as-you-can&quot;&gt;Automate as much as you can&lt;/h3&gt; &lt;p&gt;This one’s pretty short, but: ever notice you’re doing a manual task over and over, like smoke-testing a new data item or running the same analysis on a model over and over? Put it in a function! Automate it, so you can stop copy-pasting and waiting for cells to execute.&lt;/p&gt; &lt;p&gt;That’s all for now. Hopefully at least a few of those were helpful, and happy data-sciencing.&lt;/p&gt; &lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt; &lt;ol&gt; &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;Sourced from https://github.com/freewym/espresso/blob/master/espresso/tools/utils.py and modified for pedagogical purposes. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/div&gt; </description> <pubDate>Thu, 05 Aug 2021 17:09:00 +0000</pubDate> <link>https://kliu.io/post/stay-sane-data-science/</link> <guid isPermaLink="true">https://kliu.io/post/stay-sane-data-science/</guid> </item> <item> <title>Scenarios and Warning Signs for Ajeya&apos;s Aggressive, Conservative, and Best Guess AI Timelines</title> <description>&lt;p&gt;&lt;em&gt;This post is &lt;a href=&quot;https://www.lesswrong.com/posts/kQt3LsNAqxCh8qkaN/scenarios-and-warning-signs-for-ajeya-s-aggressive&quot;&gt;cross-posted&lt;/a&gt; to LessWrong, a rationality and AI safety community. May contain more jargon than usual.&lt;/em&gt;&lt;/p&gt; &lt;p&gt;Epistemic status: mild confidence that this provides interesting discussion and debate.&lt;/p&gt; &lt;p&gt;Credits to (in no particular order) Mark Xu, Sydney Von Arx, Jack Ryan, Sidney Hough, Kuhan Jeyapragasan, and Pranay Mittal for resources and feedback. Credits to Ajeya (obviously), Daniel Kokotajlo, Gwern, Robin Hanson, and many others for perspectives on timeline cruxes. This post was written as part of a 10-week AI Safety Fellowship run by Mark. All errors my own.&lt;/p&gt; &lt;h2 id=&quot;summary&quot;&gt;Summary&lt;/h2&gt; &lt;p&gt;Most of this post is unoriginal. It is intended primarily to summarize and rephrase the core distinctions between three plausible scenarios for AI development, which Ajeya lays out in her &lt;a href=&quot;https://docs.google.com/document/d/1IJ6Sr-gPeXdSJugFulwIpvavc0atjHGM82QjIfUSBGQ/edit#&quot;&gt;draft report on AI timelines&lt;/a&gt;. It also contains summaries and links to other related content.&lt;/p&gt; &lt;p&gt;As a secondary goal, it attempts to lay out concrete and hopefully plausible predictions for what would occur in each of these three worlds.&lt;/p&gt; &lt;h2 id=&quot;glossary-from-ajeyas-report&quot;&gt;Glossary (from Ajeya’s report)&lt;/h2&gt; &lt;p&gt;This post will assume familiarity with basic terminology regarding neural networks and supervised learning.&lt;/p&gt; &lt;p&gt;Before reading this post, it’s probably good to read at least a summary of Ajeya’s report (e.g. &lt;a href=&quot;https://www.lesswrong.com/posts/KrJfoZzpSDpnrv9va/draft-report-on-ai-timelines?commentId=7d4q79ntst6ryaxWD&quot;&gt;Rohin Shah’s&lt;/a&gt;). Some timeline-specific terminology that is helpful to know is also listed below:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;strong&gt;Transformative AI (TAI)&lt;/strong&gt;: A computer program that is as transformative as the Industrial Revolution was to the world’s trajectory.&lt;sup id=&quot;fnref:tai-defn&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:tai-defn&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt; &lt;li&gt;&lt;strong&gt;Effective horizon length (EHL)&lt;/strong&gt;: the “length of the task”; more precisely, Ajeya defines it as the amount of data measured in subjective seconds of experience (~how long a human would take to do it) to tell whether a model has performed a task better or worse than it did previously. For some things (e.g. predict next word in the sentence), the length is quite low; for others (e.g. run a corporation that maximizes profit), the length may be quite high.&lt;/li&gt; &lt;li&gt;&lt;strong&gt;Anchor&lt;/strong&gt;: A concept on which to base the estimated number of FLOPS (floating-point operations/second) required to &lt;strong&gt;train&lt;/strong&gt; a transformative AI. For example, you might use an Evolution Anchor, which is roughly the compute performed over all of evolution; or a Short Horizon Neural Network (NN) Anchor, which is the extrapolated compute expected for a neural network that is trained on a short horizon length. Key anchors are: &lt;ul&gt; &lt;li&gt;&lt;strong&gt;Lifetime anchor&lt;/strong&gt;: the amount of compute performed by “one human brain over one lifetime.”&lt;/li&gt; &lt;li&gt;&lt;strong&gt;Short/medium/long-horizon NN&lt;/strong&gt;: the compute required to train a NN of a size anchored to the human brain on short, medium, or long-horizon tasks, respectively.&lt;/li&gt; &lt;li&gt;&lt;strong&gt;Evolution anchor&lt;/strong&gt;: the amount of compute performed over all of evolution.&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;scenario-one&quot;&gt;Scenario One&lt;/h2&gt; &lt;p&gt;If you believe…&lt;/p&gt; &lt;h3 id=&quot;short-horizon-nn-has-a-fair-chance-of-succeeding-eg-40&quot;&gt;Short-horizon NN has a fair chance of succeeding (e.g. 40%)&lt;sup id=&quot;fnref:hypotheses-caveat&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:hypotheses-caveat&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/h3&gt; &lt;p&gt;You might believe this if you think there’s a good chance it is sufficient to fine-tune a large language model like GPT-N for TAI, and there’s no need to train models directly on tasks that take a long time to judge (e.g. “writing a twist ending to a story”, as opposed to “predict next word”). Concrete things you might expect to happen soon would thus be:&lt;/p&gt; &lt;ol&gt; &lt;li&gt;GPT-4+ can be fine-tuned to perform longer-horizon tasks, such as writing long and coherent stories, with less compute cost than the original pretraining.&lt;/li&gt; &lt;li&gt;This capability to generalize improves as the pre-training process improves (e.g. GPT-5 is much better at fine-tuning than GPT-4, which is much better than GPT-3). &lt;a href=&quot;https://www.alignmentforum.org/posts/pqkdsqd6s6w2HtT9g/intermittent-distillations-1#Scaling_Laws_for_Transfer__Danny_Hernandez_&quot;&gt;The scaling laws of model generalization&lt;/a&gt; perhaps hold up for much larger models.&lt;/li&gt; &lt;li&gt;By 2030, short-horizon models have achieved at least partial meta-learning. For example, an RL model can learn to play novel video games as well as a human can after a few hours of practice. (This criterion comes from a Q&amp;amp;A with Ajeya, although the timeline estimate is my own.)&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;For more reading, see &lt;a href=&quot;https://docs.google.com/document/d/1PaYOh_9BAYEm3RfpeX0G-cvs5JxGns98IsVK061jqRQ/edit#heading=h.f8rh9g7pqv91&quot;&gt;Ajeya on downstream skills&lt;/a&gt;.&lt;/p&gt; &lt;h3 id=&quot;algorithms-halve-compute-requirements-every-2-years-for-short-horizon-nns-or-every-1-year-for-a-mediumlong-horizon-nn&quot;&gt;Algorithms halve compute requirements every ~2 years for short-horizon NNs, or every ~1 year for a medium/long-horizon NN.&lt;/h3&gt; &lt;p&gt;You might expect this if you think there is a lot of “low-hanging fruit” in algorithms, such as if you think relatively little work has gone into optimizing training regimes or architectures for large NNs. (For context, OpenAI’s &lt;a href=&quot;https://openai.com/blog/ai-and-efficiency/&quot;&gt;AI &amp;amp; Efficiency&lt;/a&gt; suggests a halving time of ~16 months for ImageNet models.) Consequences you might expect are:&lt;/p&gt; &lt;ol&gt; &lt;li&gt;An increase in companies working to improve massive (&amp;gt;100bn parameter) language models. For example, you might expect at least 5 large tech companies working on algorithms by 2025, as opposed to “mostly only OpenAI &amp;amp; &lt;a href=&quot;https://arxiv.org/abs/2101.03961&quot;&gt;Google&lt;/a&gt; in 2020”.&lt;sup id=&quot;fnref:gwern-is-cool&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:gwern-is-cool&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; Some evidence possibly in favor of this is that Alibaba + Tsinghua University recently released (Feb 2021) &lt;a href=&quot;https://arxiv.org/pdf/2103.00823.pdf&quot;&gt;M6: A Chinese Multimodal Pretrainer&lt;/a&gt; with 100 billion parameters (although this uses a Mixture of Experts model whose efficacy I am unfamiliar with).&lt;/li&gt; &lt;li&gt;Multiple significant (e.g. 4x+) speedups targeted specifically toward training large language models by 2030. (This implies that there is significant low-hanging fruit being taken.)&lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;moores-law-returns-resulting-in-15-year-doubling-times-for-flops-to-train-a-model&quot;&gt;Moore’s Law returns, resulting in ~1.5 year doubling times for FLOPs/$ to train a model.&lt;/h3&gt; &lt;p&gt;For context, Moore’s law described transistor progress well until the mid-2000s, when the regime shifted to a doubling time of ~3-4 years&lt;sup id=&quot;fnref:moore&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:moore&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;. One possible story for a return to ~1.5-year doubling times is that the number of chip producers increases, with players perhaps aided by AI-assisted chip manufacturing. Moore’s Law is rather hard to predict, but concrete things that &lt;em&gt;might&lt;/em&gt; allow this are:&lt;/p&gt; &lt;ol&gt; &lt;li&gt;&lt;strong&gt;Arms race&lt;/strong&gt;: &lt;a href=&quot;https://www.bloomberg.com/news/articles/2021-02-11/europe-weighs-semiconductor-foundry-to-fix-supply-chain-risk&quot;&gt;The European Union makes a competitive semiconductor manufacturing factory&lt;/a&gt;. Semiconductor manufacturing becomes more politicized, encouraging an “arms race” of sorts. One reason this might happen is if &lt;a href=&quot;https://www.theguardian.com/world/2021/mar/10/china-could-invade-taiwan-in-next-six-years-top-us-admiral-warns&quot;&gt;China invades Taiwan&lt;/a&gt;, possibly taking over major semiconductor manufacturing company TSMC.&lt;/li&gt; &lt;li&gt;&lt;strong&gt;Competition&lt;/strong&gt;: &lt;a href=&quot;https://seekingalpha.com/article/4392173-tsmc-to-fall-behind-intel-samsung-2024&quot;&gt;Intel&lt;/a&gt; and &lt;a href=&quot;https://www.bloomberg.com/news/articles/2020-11-17/samsung-intensifies-chip-wars-with-bet-it-can-catch-tsmc-by-2022&quot;&gt;Samsung&lt;/a&gt; catch up with TSMC for chip manufacturing. There are several chip manufacturers in direct competition at the cutting edge by 2025.&lt;/li&gt; &lt;li&gt;&lt;strong&gt;AI-assisted chip fabrication&lt;/strong&gt;: E.g. a 10x decrease in cost by 2030 due to ML systems that make various parts of production more efficient. Current examples include &lt;a href=&quot;https://arstechnica.com/information-technology/2019/06/manufacturing-memory-means-scribing-silicon-in-a-sea-of-sensors/?comments=1&quot;&gt;listening for defects in production&lt;/a&gt;, &lt;a href=&quot;https://ai.googleblog.com/2020/04/chip-design-with-deep-reinforcement.html&quot;&gt;chip placement with RL&lt;/a&gt;, &lt;a href=&quot;https://ai.googleblog.com/2021/02/machine-learning-for-computer.html&quot;&gt;optimizing chip architectures for a given model&lt;/a&gt;, or &lt;a href=&quot;https://www.edn.com/machine-learning-in-eda-accelerates-the-design-cycle/&quot;&gt;electronic design automation&lt;/a&gt;.&lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;ai-companies-are-rapidly-willing-to-spend-2-of-gdp-to-train-a-transformative-model&quot;&gt;AI companies are rapidly willing to spend 2% of GDP to train a transformative model.&lt;/h3&gt; &lt;p&gt;This looks like AI companies rapidly realizing the immense value of training bigger AI, so they rapidly scale up until they are limited by capital-on-hand in 2030. From that point on, they are willing to spend 2% of GDP on training a model. You might expect this if:&lt;/p&gt; &lt;ol&gt; &lt;li&gt;AI shows concrete economic benefits in the short term. Commercialization of GPT models earns $&amp;gt;1bn in revenue by 2025&lt;sup id=&quot;fnref:hansonbet&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:hansonbet&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;5&lt;/a&gt;&lt;/sup&gt;, with customers willing to pay for the outputs of fine-tuned models or more polished AI-assisted GPT products.&lt;/li&gt; &lt;li&gt;Big tech companies like Google realize the profit opportunity and begin to quickly scale up models (and pricing models) of their own. One concrete example is “Google makes DeepMind build a GPT-N competitor, which it contracts to governments or other institutions.”&lt;/li&gt; &lt;li&gt;By 2025, the US or similar national government experiments with training a large language model. (This implies government involvement in AI, which could dramatically increase funding.)&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;strong&gt;Given the above, you should expect a median timeline of 2036, shaded up by Ajeya to 2040.&lt;/strong&gt;&lt;/p&gt; &lt;h2 id=&quot;scenario-two&quot;&gt;Scenario Two&lt;/h2&gt; &lt;h3 id=&quot;nns-likely-require-some-medium--to-long-horizon-training&quot;&gt;NNs likely require some medium- to long-horizon training.&lt;/h3&gt; &lt;p&gt;You might believe this if you think scaling up GPT-3 doesn’t quite lead to TAI. It gets you a good bit of the way there, but turns out you need a more complex environment to learn &lt;em&gt;how to learn&lt;/em&gt; new tasks. This might look like:&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Fine-tuning hits a wall&lt;/strong&gt;: By 2025, it’s clear that massive fine-tuned language models &lt;em&gt;underperform&lt;/em&gt; in comparison to smaller models that use supervised learning directly on the question at hand (e.g. large-scale code generation). Concretely, a possible scenario is that GPT-5-CodeCompletionXL performs worse than a new TransformerCodeM model, which was trained directly on sets of code completion questions rather than unsupervised learning like GPT.&lt;/p&gt; &lt;p&gt;This implies that new advances will be required to reach scalable TAI.&lt;/p&gt; &lt;p&gt;(&lt;a href=&quot;https://docs.google.com/document/d/1PaYOh_9BAYEm3RfpeX0G-cvs5JxGns98IsVK061jqRQ/edit#heading=h.f8rh9g7pqv91&quot;&gt;Ajeya mentions&lt;/a&gt; some reasons why you might expect a from-scratch supervised model to outperform a fine-tuned language model, but whether it would do so in reality is an open question.)&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Training on long horizons becomes popular&lt;/strong&gt;: By 2030, there exist 2+ models achieving state-of-the-art performance in a specific field that use training on long horizons (greater than few minutes). For example, a novel-writing AI that receives feedback only after finishing a novel, or an RL agent that plays long and complex games.&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;algorithmic-progress-is-a-bit-slower-than-it-was-in-the-past-halving-compute-every-3-years-for-short-horizon-nns-2-years-for-medium--long-horizon-nns&quot;&gt;Algorithmic progress is a bit slower than it was in the past, halving compute every 3 years for short-horizon NNs, 2 years for medium &amp;amp; long-horizon NNs.&lt;/h3&gt; &lt;p&gt;You might believe this if you think most of the low-hanging fruit has been picked. Architectural advancements slow down, with each one representing mostly incremental progress.&lt;/p&gt; &lt;p&gt;(For further reading and intuitions, AI Impacts has a page with &lt;a href=&quot;https://aiimpacts.org/trends-in-algorithmic-progress/&quot;&gt;many examples of past algorithmic progress&lt;/a&gt;. See also the posts mentioned in Ajeya’s paper: &lt;a href=&quot;https://arxiv.org/pdf/2005.04305.pdf&quot;&gt;Measuring the Algorithmic Efficacy of Neural Networks (2020)&lt;/a&gt; and &lt;a href=&quot;https://intelligence.org/files/AlgorithmicProgress.pdf&quot;&gt;Algorithmic Progress in Six Domains (2013)&lt;/a&gt;.)&lt;/p&gt; &lt;p&gt;Things you may expect are:&lt;/p&gt; &lt;ol&gt; &lt;li&gt;By 2025, the number of companies working on large language models has plateaued or even declined. E.g. &lt;a href=&quot;https://www.gwern.net/newsletter/2020/05#gpt-3&quot;&gt;Google Brain and DeepMind still refuse to buy into the scaling hypothesis&lt;/a&gt;; large language model startups (e.g. &lt;a href=&quot;https://cohere.ai/mlrs&quot;&gt;Cohere&lt;/a&gt;) have flopped.&lt;/li&gt; &lt;li&gt;By 2025, the large size and training time of models becomes a bottleneck to experimentation. For example, if it takes weeks and significant compute resources to run an experiment to improve efficiency, then testing out new improvements becomes much slower. We see some hints of this in the training of &lt;a href=&quot;https://arxiv.org/pdf/1912.06680.pdf&quot;&gt;OpenAI Five (“surgery”)&lt;/a&gt;, although it’s unclear to me how much of a time penalty this adds, or if this problem can be avoided by using smaller models to experiment with improvements rather than bigger ones.&lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;moores-law-slows-a-bit-flops-doubles-every-25-years&quot;&gt;Moore’s Law slows a bit. FLOPS/$ doubles every 2.5 years.&lt;/h3&gt; &lt;p&gt;By 2025, the general consensus is that Moore’s Law is dead. TSMC, Intel, and Samsung hit manufacturing delays in new nodes, and it is projected that doubling time will increase. There is a solid path for further growth, but the path forward is hard, and chip designers focus more on optimizing preexisting nodes much like Intel does today.&lt;/p&gt; &lt;p&gt;Things you might expect are:&lt;/p&gt; &lt;ol&gt; &lt;li&gt;By 2025, Intel, Samsung, and TSMC all &lt;a href=&quot;https://seekingalpha.com/article/4392173-tsmc-to-fall-behind-intel-samsung-2024&quot;&gt;fall behind on their cadences&lt;/a&gt;. Delays, like those that have &lt;a href=&quot;https://www.bbc.com/news/technology-53525710&quot;&gt;plagued Intel&lt;/a&gt;, spread to the entire industry.&lt;/li&gt; &lt;li&gt;Competition remains slim. For example, current export restrictions on semiconductors&lt;sup id=&quot;fnref:more-than-you-wanted-to-know-about-semiconductors&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:more-than-you-wanted-to-know-about-semiconductors&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;6&lt;/a&gt;&lt;/sup&gt; are successful at limiting China’s semiconductor fabrication &lt;em&gt;without triggering an arms race&lt;/em&gt;, preventing additional competition from arising.&lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;ai-companies-are-willing-to-spend-1bn-in-2025-with-that-figure-doubling-every-2-years&quot;&gt;AI companies are willing to spend $1bn in 2025, with that figure doubling every 2 years.&lt;/h3&gt; &lt;p&gt;Ajeya considers this a plausible level of spending on a “business as usual” trajectory, given the current market cap and cash on hand of major tech companies. See &lt;a href=&quot;https://docs.google.com/document/d/1qjgBkoHO_kDuUYqy_Vws0fpf-dG5pTU4b8Uej6ff2Fg/edit#&quot;&gt;here&lt;/a&gt; for more details.&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Given the above, you should expect a median timeline of ~2052.&lt;/strong&gt;&lt;/p&gt; &lt;h2 id=&quot;scenario-three&quot;&gt;Scenario Three&lt;/h2&gt; &lt;h3 id=&quot;transformative-nns-likely-depend-highly-on-long-horizon-training-perhaps-requiring-flops-on-the-order-of-evolutionary-computation&quot;&gt;Transformative NNs likely depend highly on long-horizon training, perhaps requiring FLOPs on the order of evolutionary computation.&lt;/h3&gt; &lt;p&gt;This looks like GPT &amp;amp; supervised learning hitting a dead-end for meta-learning (learning new, complex tasks). No matter how hard we try, we can’t get neural networks to learn complex skills over short training timeframes. One of the options left to us is something like &lt;a href=&quot;https://www.lesswrong.com/posts/fRsjBseRuvRhMPPE5/an-overview-of-11-proposals-for-building-safe-advanced-ai#1__Reinforcement_learning___transparency_tools&quot;&gt;RL + transparency tools&lt;/a&gt; or supervised learning with feedback that is given only after long subjective time elapsed, which are both highly compute-intensive ways of training an agent.&lt;/p&gt; &lt;p&gt;Things you might expect are:&lt;/p&gt; &lt;ol&gt; &lt;li&gt;By 2030, spending on massive LMs plateaus such that there is &amp;lt;1 doubling in 3 years. The general consensus is that large language models are powerful, but yield diminishing returns, and are significantly limited at tasks that take a human more than 5 minutes to consider.&lt;/li&gt; &lt;li&gt;“AI winter;” qualitatively, advances comparable to significant advances of the past five years (e.g. AlphaGo, GPT-2, GPT-3) are much fewer and further between as low-hanging fruit is already picked. This period may last for 10+ years.&lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;algorithms-halve-compute-every-4-years-for-short-horizon-3-years-for-medium-and-long-horizon&quot;&gt;Algorithms halve compute every 4 years for short-horizon, 3 years for medium and long horizon.&lt;/h3&gt; &lt;p&gt;This looks a lot like Scenario Two, but is quantitatively a bit slower. Realistically, the biggest sign of this is probably just a slowing trend in 2025’s “algorithmic progress” chart, but other things you might expect are:&lt;/p&gt; &lt;ol&gt; &lt;li&gt;A decline in discoveries of new neural network architectures and techniques for efficiency. If you were to plot the major discoveries of a field such as NLP on a graph, you would see a flurry of discoveries in the 2010s, but by the end of the 2020s progress has significantly slowed.&lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;moores-law-slows-significantly-doubling-flops-every-35-years&quot;&gt;Moore’s law slows significantly, doubling FLOPS/$ every 3.5 years.&lt;/h3&gt; &lt;p&gt;This might occur if &lt;a href=&quot;https://www.extremetech.com/computing/272096-3nm-process-node&quot;&gt;silicon process costs keep rising&lt;/a&gt;, eventually becoming uneconomical even for large players. There are incremental further advancements (e.g. optimizing 3nm+++), but overall stagnation continues.&lt;/p&gt; &lt;p&gt;Things you might expect are:&lt;/p&gt; &lt;ol&gt; &lt;li&gt;By 2030, all major chip producers (e.g. Intel, AMD, Apple, NVIDIA) have significantly increased their timelines for moving to new nodes. For example, if on 3nm, they plan to move to 1nm in 3+ years.&lt;/li&gt; &lt;li&gt;More unlikely: a &lt;a href=&quot;https://www.gwern.net/Slowing-Moores-Law&quot;&gt;state-sponsored effort to slow down chip fabrication&lt;/a&gt;, perhaps due to global war and instability.&lt;/li&gt; &lt;/ol&gt; &lt;h3 id=&quot;ai-companies-will-have-to-wait-for-the-entire-economy-to-grow-sufficiently-to-finance-tai&quot;&gt;AI companies will have to wait for the entire economy to grow sufficiently to finance TAI.&lt;sup id=&quot;fnref:caveat-spending&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:caveat-spending&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;7&lt;/a&gt;&lt;/sup&gt;&lt;/h3&gt; &lt;p&gt;This follows from the slowing of Moore’s Law and the need for expensive, long-horizon training. This world seems like one where advanced AI is not terribly profitable and requires resources on the scale of a 2090s &lt;a href=&quot;https://en.wikipedia.org/wiki/Megaproject&quot;&gt;megaproject&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Things you might expect are:&lt;/p&gt; &lt;ol&gt; &lt;li&gt;Efforts to commercialize large language models are not profitable. OpenAI shuts down the GPT-3 API by 2025, opting for a different business model. Further endeavors reach only limited profitability due to limited use cases.&lt;/li&gt; &lt;li&gt;“AI winter,” as discussed in the first section, causes a lack of investment in AI companies. One possible world is that spending in AI &lt;a href=&quot;https://docs.google.com/document/d/1cCJjzZaJ7ATbq8N2fvhmsDOUWdm7t3uSSXv6bD0E_GM/edit#heading=h.x0pkk2mc19ey&quot;&gt;plateaus for several decades&lt;/a&gt;, before experiencing another period of exponential growth as a new paradigm is discovered in the late 21st century.&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;strong&gt;Given the above, you should expect a median timeline of **2100&lt;/strong&gt;, shaded down to 2090 by Ajeya.**&lt;/p&gt; &lt;h1 id=&quot;epistemic-notes&quot;&gt;Epistemic Notes&lt;/h1&gt; &lt;p&gt;The above predictions are obviously rough. Even in a world that satisfies a particular timeline (e.g. AI by 2052), I expect the specifics of more than half of them to probably be wrong. However, the hope is that these predictions can be used as a sort of barometer, so that five years down the line, we can look back and ask, “how many of these came true?” The answer may help us figure out when we predict TAI to eventually arrive.&lt;/p&gt; &lt;p&gt;I also hope these predictions can be used today to clarify researchers’ own timelines. If you believe most of the predictions in Scenario 1 are plausible, for example, you may want to update toward shorter timelines, and likewise if you think Scenario 3 is plausible, you should probably update toward later timelines.&lt;/p&gt; &lt;h1 id=&quot;other-scenarios-and-open-questions&quot;&gt;Other Scenarios and Open Questions&lt;/h1&gt; &lt;p&gt;In the process of writing this and further understanding Ajeya’s assumptions, I had a few ideas for other scenarios that I would enjoy seeing fleshed out.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;What happens if government spending gets involved? What are reasonable estimates for spending?&lt;/li&gt; &lt;li&gt;How likely is it that tasks such as meta-learning can be solved via “secret sauce” waiting to be discovered, rather than pure algorithmic brute force?&lt;/li&gt; &lt;li&gt;How do you make better predictions about Moore’s Law?&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://www.gwern.net/newsletter/2020/05#fn19&quot;&gt;[via Gwern]&lt;/a&gt;: How will a 1T-parameter language model behave? 10T? 100T?&lt;/li&gt; &lt;li&gt;How will multimodal models with natural language supervision (e.g. &lt;a href=&quot;https://openai.com/blog/clip/&quot;&gt;CLIP&lt;/a&gt;, &lt;a href=&quot;https://arxiv.org/pdf/2103.00823.pdf&quot;&gt;M6&lt;/a&gt;) affect algorithmic progress? Could multimodal models open a “greenfield” of low-hanging algorithmic fruit?&lt;/li&gt; &lt;li&gt;What do “counterarguments to each scenario” look like? What compelling current or future evidence would cause you to reject a scenario?&lt;/li&gt; &lt;/ul&gt; &lt;h1 id=&quot;further-reading--related-work&quot;&gt;Further Reading &amp;amp; Related Work&lt;/h1&gt; &lt;p&gt;Here are some of the documents I found useful while writing this post.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://forum.effectivealtruism.org/posts/QAqghTmp7FSMcJ4ch/ama-ajeya-cotra-researcher-at-open-phil?commentId=KnidjKuibKyrDunbZ#KnidjKuibKyrDunbZ&quot;&gt;Ajeya’s comments on the types of disagreements with AI timelines&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://fas.org/sgp/crs/misc/R46581.pdf&quot;&gt;Semiconductors and Federal Policy&lt;/a&gt;&lt;/li&gt; &lt;li&gt;For context on how quickly we expect AI to gain economic value, I found &lt;a href=&quot;https://forum.effectivealtruism.org/posts/QAqghTmp7FSMcJ4ch/ama-ajeya-cotra-researcher-at-open-phil?commentId=HGu4qZx5E93JbuFDb#KnidjKuibKyrDunbZ&quot;&gt;Ajeya and Gwern’s discussion on the “neglectedness” of AI solutions&lt;/a&gt; insightful.&lt;/li&gt; &lt;li&gt;Daniel Kokotajlo’s &lt;a href=&quot;https://www.lesswrong.com/posts/rzqACeBGycZtqCfaX&quot;&gt;Fun with +12 OOMs of Compute&lt;/a&gt; describes a thought experiment explaining how you might envision using $10^{35}$ FLOPs of compute.&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt; &lt;ol&gt; &lt;li id=&quot;fn:tai-defn&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;See https://docs.google.com/document/d/1IJ6Sr-gPeXdSJugFulwIpvavc0atjHGM82QjIfUSBGQ/edit#heading=h.6t4rel10jbcj &lt;a href=&quot;#fnref:tai-defn&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:hypotheses-caveat&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;This crux simplifies Ajeya’s &lt;a href=&quot;https://docs.google.com/document/d/1cCJjzZaJ7ATbq8N2fvhmsDOUWdm7t3uSSXv6bD0E_GM/edit#&quot;&gt;range of estimates for hypothesis probabilities&lt;/a&gt; considerably. For each scenario, I’ve used the most probable anchor as the “central crux”, as it seems to me that if you believe short-horizon NN is 40% likely to work, then the other hypotheses are also fairly sensible. &lt;a href=&quot;#fnref:hypotheses-caveat&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:gwern-is-cool&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;This is reminiscent of Gwern’s &lt;a href=&quot;https://www.lesswrong.com/posts/N6vZEnCn6A95Xn39p/are-we-in-an-ai-overhang?commentId=jbD8siv7GMWxRro43&quot;&gt;earlier post&lt;/a&gt; from “Are we in an AI overhang?” &lt;a href=&quot;#fnref:gwern-is-cool&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:moore&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;Sourced from https://docs.google.com/document/d/1cCJjzZaJ7ATbq8N2fvhmsDOUWdm7t3uSSXv6bD0E_GM/edit#heading=h.96w8mskhfp5l &lt;a href=&quot;#fnref:moore&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:hansonbet&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;Credits to Robin Hanson’s bet here: https://twitter.com/robinhanson/status/1297325331158913025 &lt;a href=&quot;#fnref:hansonbet&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:more-than-you-wanted-to-know-about-semiconductors&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;The US has recently &lt;a href=&quot;https://www.tomshardware.com/news/smic-import-restrictions&quot;&gt;prevented Chinese companies such as SMIC&lt;/a&gt; from getting high-end manufacturing equipment. It also has &lt;a href=&quot;https://www.brookings.edu/techstream/the-chip-making-machine-at-the-center-of-chinese-dual-use-concerns/&quot;&gt;worked with the Dutch&lt;/a&gt; to deny ASML, a machine manufacturing company, from delivering high-quality EUV chip machines to China. Quick research seems to suggest that &lt;a href=&quot;https://semiwiki.com/semiconductor-services/semiconductor-advisors/281384-asml-euv-china-chip-equip-risk/&quot;&gt;building a manufacturing plant without US equipment&lt;/a&gt; is extremely hard, at least for now. &lt;a href=&quot;#fnref:more-than-you-wanted-to-know-about-semiconductors&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:caveat-spending&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;This is derived from Ajeya’s assumption that spending will start at 300 million dollars in 2025 and grow every 3 years, reaching a max of 100bn by 2055, at which point it is bounded at 0.5% of GDP. However, since TAI isn’t projected until 2100 in this scenario anyway, in practice this means that only the upper bound really matters. &lt;a href=&quot;#fnref:caveat-spending&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/div&gt; </description> <pubDate>Sun, 28 Mar 2021 00:00:00 +0000</pubDate> <link>https://kliu.io/post/scenarios-and-warning-signs/</link> <guid isPermaLink="true">https://kliu.io/post/scenarios-and-warning-signs/</guid> </item> <item> <title>My experience in a covid vaccine trial, and why you should join one</title> <description>&lt;p&gt;&lt;em&gt;Thanks to Aneesh Edara for reviewing this post.&lt;/em&gt;&lt;/p&gt; &lt;p&gt;Covid is probably going to get much worse before it gets better. Vaccine rollout is &lt;em&gt;extremely slow&lt;/em&gt;, for &lt;a href=&quot;https://www.scottaaronson.com/blog/?p=5240&quot;&gt;no good reason&lt;/a&gt;. In Massachusetts, where I currently reside, the government doesn’t expect to have vaccines &lt;a href=&quot;https://www.mass.gov/info-details/when-can-i-get-the-covid-19-vaccine&quot;&gt;open to the general public until April to June&lt;/a&gt;. On top of that, the UK and South African variants of the coronavirus are also &lt;a href=&quot;https://www.lesswrong.com/posts/i6doyTk6kHkGyKybq/covid-1-7-the-fire-of-a-thousand-suns#The_English_Strain__Are_We_F___ed__Is_it_Over_&quot;&gt;fairly likely to wreak havoc&lt;/a&gt;. Zvi Mowshowitz in the previous article predicts that things are likely to get &lt;em&gt;worse&lt;/em&gt;, not better, by ~May.&lt;/p&gt; &lt;p&gt;In the meantime, how do we protect ourselves and those around us?&lt;/p&gt; &lt;h2 id=&quot;why-you-should-join-a-vaccine-trial&quot;&gt;Why you should join a vaccine trial&lt;/h2&gt; &lt;p&gt;Joining a trial is a 50% shot of getting a vaccine now, which seems like a much better deal than a 100% shot of getting a vaccine several months down the line.&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; (In a trial, there’s a 50% chance you’re placed in the vaccine group and get the real vaccine, and a 50% chance you’re placed in the placebo and get nothing.)&lt;/p&gt; &lt;p&gt;It’s fast (takes &amp;lt;1 week from intent to shot), safe (Phase 3 vaccines have already passed safety checks), and &lt;em&gt;they literally pay you for it&lt;/em&gt;. The vaccine itself is also very likely to be effective; after all, the reason why it’s in Phase 3 trials is because it triggered good immune reactions in Phase 1/2.&lt;/p&gt; &lt;p&gt;If you’re interested in reducing the risk of you getting covid in the next few months, it thus seems like a good choice to make. It’s also a good altruistic choice, because your participation will probably speed up recruitment a tiny bit, making it possible that they finish the trial faster as a result.&lt;/p&gt; &lt;h2 id=&quot;how-to-join-a-trial&quot;&gt;How to join a trial&lt;/h2&gt; &lt;p&gt;You might think that with vaccines so far down the pipeline, and Moderna’s and Pfizer’s approved in the US, there would be no trials currently enrolling. &lt;strong&gt;This is not true&lt;/strong&gt;. Many trials (Johnson &amp;amp; Johnson, AstraZenenca, etc.) are still enrolling new participants. Here’s how to join one:&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;Find a trial with an enrollment center near you. Good options include:&lt;/p&gt; &lt;p&gt;a. Search “covid vaccine trials near me” to see if there are any recent news articles on it.&lt;/p&gt; &lt;p&gt;b. Head to &lt;a href=&quot;https://coviddash.org/&quot;&gt;coviddash.org&lt;/a&gt; to find the trial sites closest to you.&lt;/p&gt; &lt;p&gt;c. I made a &lt;a href=&quot;https://docs.google.com/document/d/1ARJS1v7qOjUAF1H6BAR70U_crnEBAFHG5YAm2wG_x0Y/edit&quot;&gt;list of websites here&lt;/a&gt; if you aren’t able to find any local leads. This list is partially tailored towards Boston trials as of ~1 month ago.&lt;/p&gt; &lt;/li&gt; &lt;li&gt;Sign up on their website, and then &lt;em&gt;call the number they give you&lt;/em&gt;. At least for me, I put in my email, but never got a text response. Only after calling to follow up were they able to schedule me, and I got a shot ~4 days after that.&lt;/li&gt; &lt;li&gt;Go to the trial site, get screened, and hopefully get a vaccine!&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;my-experience&quot;&gt;My experience&lt;/h2&gt; &lt;p&gt;I joined the single-dose &lt;a href=&quot;https://www.ensemblestudy.com/#!/&quot;&gt;ENSEMBLE study&lt;/a&gt;, by Johnson &amp;amp; Johnson. On December 8, I received a shot (which was either a saline placebo or the real deal).&lt;/p&gt; &lt;p&gt;Some interesting things I learned through the process:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;strong&gt;Time commitment&lt;/strong&gt;: For me, I had a one-hour Zoom informed consent session, then a three hour trip to the hospital to get screened and injected. The trial lasts for 2 years, with periodic in-person followups after 1 month, 3 months, and continuing at progressively longer intervals. For J&amp;amp;J, you also have to log twice weekly if you have had any symptoms of COVID-19, and if you do, you’ll have to come in again to receive a package of saliva tests and nasal swabs to take periodically.&lt;/li&gt; &lt;li&gt;&lt;strong&gt;Leaving the study&lt;/strong&gt;: You can leave the study at any time, &lt;strong&gt;even to receive another vaccine&lt;/strong&gt;. Moreover, if you leave the study, they will also tell you if you got the placebo or the real vaccine. This means that if you got the placebo, you can get an approved vaccine as normal. (If you got the trial vaccine, it might not be a good idea or even necessary to get another vaccine, though.)&lt;/li&gt; &lt;li&gt;&lt;strong&gt;What if the trial vaccine gets approved?&lt;/strong&gt; In the case that the trial vaccine is approved, people are debating whether or not they should immediately vaccinate the placebo group or keep studying them. Regardless of the ethicality, it’s not entirely clear right now which option they’ll pick, but there is a chance you might get a &lt;a href=&quot;https://www.sciencemag.org/news/2020/12/makers-successful-covid-19-vaccine-wrestle-options-many-thousands-who-received-placebos&quot;&gt;blind crossover&lt;/a&gt; or an accelerated dose.&lt;/li&gt; &lt;li&gt;&lt;strong&gt;Payment&lt;/strong&gt;: You do get paid to join a trial! Payment is ~$1000 for me, spread out across the various scheduled visits of the trial.&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;other-cheap-personal-interventions&quot;&gt;Other cheap personal interventions&lt;/h2&gt; &lt;p&gt;&lt;strong&gt;Purchase and use a P100 mask&lt;/strong&gt;. P100 masks are industrial masks that filter 99.97% of particles. (Compare with the “gold standard” N95, which filters 95% of particles.)&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt; &lt;a href=&quot;https://worldspiritsockpuppet.com/2020/10/22/P100-PSA.html&quot;&gt;A well-fitted P100 mask could reduce your risk of getting covid from an activity by 100x&lt;/a&gt;. This is like, maybe better than a vaccine?? They also only cost like $30 on eBay. Just do it, it’ll be the last mask you’ll ever need to buy.&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Use &lt;a href=&quot;https://www.microcovid.org/&quot;&gt;microcovid.org&lt;/a&gt; to calculate the risk of your activities&lt;/strong&gt;. Know thy enemy. &lt;a href=&quot;https://www.microcovid.org/&quot;&gt;microCOVID&lt;/a&gt; is a project that allows you to calculate your expected covid risk of any social activity, and tells you how dangerous it is if you aim to keep your risk of getting covid at ~1%/year.&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Install an Exposure Notification app on your phone&lt;/strong&gt;. Check availability in your state &lt;a href=&quot;https://www.androidpolice.com/2021/01/02/covid-tracing-apps-ens-android/&quot;&gt;here&lt;/a&gt;&lt;sup id=&quot;fnref:3&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:3&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; and either download the app on Android, or enable it in Settings on iOS.&lt;/p&gt; &lt;p&gt;Oh, and &lt;strong&gt;yell at your representatives, health officials, etc.&lt;/strong&gt; to speed up the vaccine rollout. Seriously.&lt;/p&gt; &lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt; &lt;ol&gt; &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;Thanks to Zvi as well for &lt;a href=&quot;https://www.lesswrong.com/posts/ReoTi64Mkud398JjD/covid-11-26-thanksgiving&quot;&gt;making this argument&lt;/a&gt; and motivating me to actually join a trial. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;The difference between the N and the P is that NXX masks don’t filter out oil-based substances, while PXX masks do. This isn’t relevant for covid, so both are equally good for their given filtration efficacies. &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:3&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;Angry glares at Massachusetts for taking &lt;em&gt;eight months&lt;/em&gt; before &lt;em&gt;beginning to consider&lt;/em&gt; whether they &lt;a href=&quot;https://www.masslive.com/coronavirus/2020/11/massachusetts-department-of-health-seeks-bidders-to-test-digital-covid-19-contact-tracing-system-that-uses-bluetooth-signals.html&quot;&gt;&lt;em&gt;should maybe have&lt;/em&gt; an exposure notification app&lt;/a&gt;. &lt;a href=&quot;#fnref:3&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/div&gt; </description> <pubDate>Thu, 07 Jan 2021 20:38:01 +0000</pubDate> <link>https://kliu.io/post/covid-vaccine-trial/</link> <guid isPermaLink="true">https://kliu.io/post/covid-vaccine-trial/</guid> </item> <item> <title>What needs to work for your Zoom call to work?</title> <description>&lt;blockquote&gt; &lt;p&gt;“If I have seen further, it is by standing on the shoulders of &lt;del&gt;giants&lt;/del&gt; &lt;em&gt;terrible and demonic abstractions&lt;/em&gt;.”&lt;/p&gt; &lt;p&gt;-Isaac Newton, probably&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;Zoom feels obscenely normal now. It’s become so day-to-day that &lt;a href=&quot;https://www.nationalgeographic.com/science/2020/04/coronavirus-zoom-fatigue-is-taxing-the-brain-here-is-why-that-happens/&quot;&gt;Zoom fatigue&lt;/a&gt; is now a known thing.&lt;/p&gt; &lt;p&gt;But honestly, it’s a miracle every time it works. In the spirit of those &lt;a href=&quot;https://github.com/alex/what-happens-when&quot;&gt;blog posts about what happens when you press enter in your browser&lt;/a&gt;, here’s a (clearly incomplete) list of everything that has to go right for you to have that &lt;em&gt;definitely&lt;/em&gt; pointless 10am Zoom call&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt; &lt;p&gt;A note before we begin: many of these will sound ridiculously obvious, and many of you may have always had them. However, across the world, across social classes, and across levels of technical understanding, what is normal for one person may seem like a pure luxury to another. That is part of why I wanted to write this list.&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt; &lt;h2 id=&quot;hardwareother-services-outside-the-computer&quot;&gt;Hardware/Other Services (outside the computer)&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;You need stable power. If you’re on a laptop or phone, this probably comes from an integrated battery; if you’re on a desktop, it probably comes from mains electricity unless you’re lucky enough to have a UPS.&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://www.iol.co.za/news/world/california-warns-of-possible-load-shedding-as-record-heat-wave-takes-hold-e7f039c8-02dc-443e-90bc-e3d469c65f8e&quot;&gt;Your local electricity system needs to have enough power to meet its customers’ demand&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;The power lines to your house must be intact and undamaged by &lt;a href=&quot;https://time.com/5889332/hurricane-sally-path/&quot;&gt;hurricanes&lt;/a&gt; or &lt;a href=&quot;https://www.nbcnews.com/business/business-news/power-outages-hamper-evacuation-warnings-distance-learning-wildfire-torn-california-n1239858&quot;&gt;fire/the threat of fire&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;More broadly, &lt;a href=&quot;https://www.nytimes.com/interactive/2020/us/fires-map-tracker.html&quot;&gt;your house must not be on fire&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://ourworldindata.org/internet&quot;&gt;You need access to the Internet&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;Your Internet service provider must not be having a service outage.&lt;/li&gt; &lt;li&gt;Your Internet service provider must not be experiencing &lt;a href=&quot;https://www.nytimes.com/2020/03/26/business/coronavirus-internet-traffic-speed.html&quot;&gt;unprecedented loads due to COVID&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;Your modem/optical network terminal that connects you to your Internet service provider needs to be working.&lt;/li&gt; &lt;li&gt;Most likely, &lt;a href=&quot;https://www.engadget.com/2019-06-18-google-calendar-is-down.html&quot;&gt;your calendar and email services need to be up&lt;/a&gt; to find your Zoom link.&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://status.zoom.us/&quot;&gt;Zoom must be up&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;Your router needs to be working and perhaps to be &lt;a href=&quot;https://community.verizonwireless.com/t5/My-Business-Account/Actiontec-MI424WR-NAT-Table-Issues/td-p/4686&quot;&gt;capable of handling a large amount of connections from multiple users at the same time&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;Either your Ethernet cables have to be in good condition and plugged in properly, or there has to be an unobstructed path to your wifi router without &lt;a href=&quot;https://www.howtogeek.com/209450/how-you-and-your-neighbors-are-making-each-other%E2%80%99s-wi-fi-worse-and-what-you-can-do-about-it/&quot;&gt;too many people using the same channel&lt;/a&gt;.&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;hardware-inside-the-computer&quot;&gt;Hardware (inside the computer)&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;&lt;a href=&quot;https://www.statista.com/statistics/748551/worldwide-households-with-computer/&quot;&gt;You need a computer&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;You need a computer satisfying Zoom’s &lt;a href=&quot;https://support.zoom.us/hc/en-us/articles/201362023-System-requirements-for-Windows-macOS-and-Linux&quot;&gt;minimum hardware requirements&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;You need speakers or a pair of headphones.&lt;/li&gt; &lt;li&gt;You need a microphone.&lt;/li&gt; &lt;li&gt;You probably want a webcam, too. &lt;a href=&quot;https://www.digitaltrends.com/computing/webcams-sold-out-where-to-buy/&quot;&gt;That might be a little challenging.&lt;/a&gt;&lt;/li&gt; &lt;li&gt;Your network card needs to be working, without shorts or frayed wires to degrade its performance.&lt;/li&gt; &lt;li&gt;Your hard drive needs to hold Zoom’s application data (and presumably, enough of your operating system to open a Zoom link) without &lt;a href=&quot;https://en.wikipedia.org/wiki/Bit_rot&quot;&gt;bitrotting&lt;/a&gt; or &lt;a href=&quot;https://www.backblaze.com/blog/backblaze-hard-drive-stats-q1-2020/&quot;&gt;failing&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;Your graphics card needs to correctly render content without any artifacting.&lt;/li&gt; &lt;li&gt;Your computer processor needs to stably run at its current voltage and clock speed.&lt;/li&gt; &lt;li&gt;If you’re using Bluetooth for your headphones, your headphones need to be charged and working correctly. Same for any wireless keyboard or mouse.&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;software&quot;&gt;Software&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;If you’re running Windows, &lt;a href=&quot;https://www.shamusyoung.com/twentysidedtale/?p:50715&quot;&gt;let’s hope you don’t have any Windows updates pending&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://www.wired.com/story/notpetya-cyberattack-ukraine-russia-code-crashed-the-world/&quot;&gt;Your computer must not be infected with malware that prevents it from starting&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;You need enough disk space to install Zoom.&lt;/li&gt; &lt;li&gt;You need to not be running Windows Vista or below, or macOS 10.8 or below.&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://wireless.wiki.kernel.org/en/users/Drivers&quot;&gt;Your operating system needs to support your wifi card&lt;/a&gt;, and &lt;a href=&quot;https://itsfoss.com/fix-no-wireless-network-ubuntu/&quot;&gt;you need to have the correct drivers already installed&lt;/a&gt; (remember, you can’t download them just-in-time from the Internet!)&lt;/li&gt; &lt;li&gt;Your operating system needs to support your graphics card, and &lt;a href=&quot;https://wiki.debian.org/NvidiaGraphicsDrivers&quot;&gt;your graphics drivers must be installed&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;Your graphics drivers must not be &lt;a href=&quot;https://gitlab.freedesktop.org/drm/amd/-/issues&quot;&gt;buggy or crash&lt;/a&gt; for you.&lt;/li&gt; &lt;li&gt;Your &lt;a href=&quot;https://www.google.com/search?q:explorer+crash+windows&quot;&gt;desktop environment must not crash on you&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;You need a &lt;a href=&quot;https://duckduckgo.com/?t:ffab&amp;amp;q:pulseaudio+problems&amp;amp;ia:web&quot;&gt;working audio software stack&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;If you’re using Bluetooth audio, &lt;a href=&quot;https://fosspost.org/linux-bluetooth-problem/&quot;&gt;your operating system must support your Bluetooth chipset&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;If you’re using Bluetooth audio, &lt;a href=&quot;https://www.soundguys.com/understanding-bluetooth-codecs-15352/&quot;&gt;your operating system must support a codec that your headphones use&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;Zoom must support your operating system.&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://duckduckgo.com/?t:ffab&amp;amp;q:chrome+crashes+on+start&amp;amp;ia:web&quot;&gt;Your browser must be working and not crash&lt;/a&gt;, so you can open your Zoom link.&lt;/li&gt; &lt;li&gt;You must have properly configured Zoom to use the correct webcam, microphone, and speakers.&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://www.reddit.com/r/Zoom/comments/hba4cq/problems_with_zoom_sso/&quot;&gt;You need to be properly logged into Zoom&lt;/a&gt;.&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;politics&quot;&gt;Politics&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;&lt;a href=&quot;https://www.nbcnews.com/tech/tech-news/zoom-was-window-through-china-s-great-firewall-it-may-n1230511&quot;&gt;Your government must not have a state-sponsored firewall to block Zoom or any of its dependent services&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://support.zoom.us/hc/en-us/articles/203806119-Restricted-countries-or-regions&quot;&gt;Your government must not have been banned by Zoom for regulatory reasons&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://netblocks.org/&quot;&gt;Your government must not have shut down the Internet due to school exams, isolation, riots, or other events.&lt;/a&gt;&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;social&quot;&gt;Social&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;You must not be &lt;a href=&quot;https://www.worldometers.info/coronavirus/&quot;&gt;one of the 939,185 people who have died of the coronavirus as of September 16, 2020&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;Or the &lt;a href=&quot;https://ourworldindata.org/births-and-deaths&quot;&gt;~60 million people who will die each year&lt;/a&gt;. Yeah, uh, in summary &lt;a href=&quot;https://en.wikipedia.org/wiki/Transhumanism&quot;&gt;death is bad and we should try to stop it&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;You must not have anything more pressing to do. Which, in today’s world, might not be true.&lt;/li&gt; &lt;li&gt;You must have an environment where it’s safe to do Zoom calls, and where those around you won’t stop you from doing so through harassment or any other means.&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://www.bbc.com/worklife/article/20200421-why-zoom-video-chats-are-so-exhausting&quot;&gt;You probably want a quiet space where you can focus and deal with the social tradeoffs of virtual meetings in comparison to physical interaction&lt;/a&gt;.&lt;/li&gt; &lt;li&gt;And finally: &lt;a href=&quot;https://twitter.com/search?q:don%27t%20want%20to%20go%20to%20zoom&amp;amp;src:typed_query&quot;&gt;you have to want to go to that Zoom call&lt;/a&gt;.&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;in-summary&quot;&gt;In summary&lt;/h2&gt; &lt;p&gt;There are a lot of external or otherwise uncontrollable factors that mean that someone can’t make it to a call these days. Maybe, we can be a little kinder when someone says they can’t make it?&lt;/p&gt; &lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt; &lt;ol&gt; &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;To open-source enthusiasts, Google fanatics, or any other group that would prefer a different videocommunications system: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;s/Zoom/whateveryouwant&lt;/code&gt;. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;The other part is that you can use this as a &lt;em&gt;really&lt;/em&gt; long flowchart, if you want, for why your Zoom call isn’t working. Just kidding. &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/div&gt; </description> <pubDate>Wed, 16 Sep 2020 03:05:48 +0000</pubDate> <link>https://kliu.io/post/what-needs-to-work-zoom/</link> <guid isPermaLink="true">https://kliu.io/post/what-needs-to-work-zoom/</guid> </item> <item> <title>Using a Yubikey as a touchless, magic unlock key for Linux</title> <description>&lt;p&gt;Yubikeys are great for security, but their benefits decrease somewhat when you leave them in your computer unattended.&lt;sup id=&quot;fnref:3&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:3&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; I unfortunately have a habit of forgetting my key when I walk away from the computer. I also have login passwords that are way too long and easy to typo.&lt;/p&gt; &lt;p&gt;Thankfully, there’s a way to solve both of these problems: use a Yubikey to unlock your computer when you put it in and lock your computer when you remove it!&lt;/p&gt; &lt;h2 id=&quot;prior-art&quot;&gt;Prior art&lt;/h2&gt; &lt;p&gt;The first example I remember seeing of this concept years ago was &lt;a href=&quot;https://www.predator-usb.com/predator/en/index.php&quot;&gt;Predator&lt;/a&gt;, Windows software (with a delightfully retro website) that locks your computer when you remove a special USB drive. Similar examples for Linux include &lt;a href=&quot;https://wiki.debian.org/pamusb&quot;&gt;pamusb&lt;/a&gt;, which allows you to login using Linux’s PAM by inserting a specially-formatted USB stick.&lt;/p&gt; &lt;p&gt;Of course, nowadays most people use Yubikeys to accomplish this, and Yubico has &lt;a href=&quot;https://developers.yubico.com/yubico-pam/Authentication_Using_Challenge-Response.html&quot;&gt;convenient guides&lt;/a&gt; on how to accomplish this very task. However, I wanted to make it &lt;em&gt;touchless&lt;/em&gt; – that is, I wanted to be able to plug in my Yubikey and instantly unlock my laptop, without clicking through logins or touching the Yubikey button. Upon removal, I wanted to instantly lock my computer.&lt;/p&gt; &lt;h2 id=&quot;making-it-contactless&quot;&gt;Making it contactless&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/h2&gt; &lt;p&gt;There are some guides on how to do this online (unlock when you plug in, lock when you remove), but unfortunately most of them fall prey to the problem described in &lt;a href=&quot;https://medium.com/@d0znpp/how-to-sacrifice-security-using-a-public-yubikey-linux-guides-c823c4c6e2&quot;&gt;this article&lt;/a&gt;. A lot of them use udev to detect when the Yubikey is plugged in, but they don’t actually authenticate the key beyond checking its vendor ID, model ID, and sometimes serial number, which all can &lt;a href=&quot;https://forums.anandtech.com/threads/changing-creating-a-custom-serial-id-on-a-flash-drive-low-level-blocks.2099116/&quot;&gt;easily be faked&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;To provide actual security, most official guides use either &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pam_u2f&lt;/code&gt; (which authenticates a Yubikey through the &lt;a href=&quot;https://en.wikipedia.org/wiki/Universal_2nd_Factor&quot;&gt;U2F protocol&lt;/a&gt;) or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pam_yubico&lt;/code&gt; (which uses either online validation through YubiCloud or offline validation through a challenge-response protocol). The U2F method requires a tap on the Yubikey, while the challenge-response process can be done without user interaction, so I went with the latter. I set up traditional Yubikey authentication using &lt;a href=&quot;https://support.system76.com/articles/yubikey-login/&quot;&gt;this great guide from System76&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;However, I still needed some way to test the challenge-response for success when I plugged in the key. Usually, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pam_yubico&lt;/code&gt; is run when you login or unlock your computer (i.e. when pressing the enter key on the lockscreen). But I didn’t want &lt;em&gt;any&lt;/em&gt; clicks, so I needed a way to run it without interaction.&lt;/p&gt; &lt;p&gt;Enter &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;udev&lt;/code&gt; (again) and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pamtester&lt;/code&gt;!&lt;/p&gt; &lt;p&gt;Here’s the udev rules I included:&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kevin@you:~ » cat /etc/udev/rules.d/yubikey.rules ACTION::&quot;remove&quot;, ENV{DEVTYPE}::&quot;usb_device&quot;, ENV{PRODUCT}::&quot;1050/407*&quot;, RUN+:&quot;/usr/local/sbin/ykunlock.sh lock&quot; ACTION::&quot;add&quot;, ENV{DEVTYPE}::&quot;usb_device&quot;, ENV{ID_BUS}::&quot;usb&quot;, ENV{PRODUCT}::&quot;1050/407*&quot;, RUN+:&quot;/usr/local/sbin/ykunlock.sh unlock&quot; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;These rules effectively call a script when inserting and removing the key, so I can trigger any action from the script. Note that the script &lt;strong&gt;should not immediately unlock the computer&lt;/strong&gt;, to avoid the security issues mentioned earlier.&lt;/p&gt; &lt;p&gt;To actually test the challenge-response from the Yubikey on inserting, I decided to use &lt;a href=&quot;http://pamtester.sourceforge.net/&quot;&gt;pamtester&lt;/a&gt;, a simple utility that pretends to trigger a PAM authentication from the command line. Since &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pam_yubico&lt;/code&gt; is installed, this will naturally test the challenge-response if a Yubikey is plugged in.&lt;/p&gt; &lt;p&gt;Here’s the final script:&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;1&amp;gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;(&lt;/span&gt;logger &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;basename&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 2&amp;gt;&amp;amp;1 &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;RUN&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&quot;lock&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then &lt;/span&gt;pkill &lt;span class=&quot;nt&quot;&gt;-USR1&lt;/span&gt; swayidle &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# unlock&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt; | pamtester login kevin authenticate&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# PAM login successful&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# kill locker&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;kill&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-KILL&lt;/span&gt; &lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;pgrep swaylock&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt; ps aux | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;swaylock &lt;span class=&quot;c&quot;&gt;# turn on displays&lt;/span&gt; SWAYSOCK:&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; /run/user/1000/sway-ipc.&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.sock&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt; swaymsg &lt;span class=&quot;s2&quot;&gt;&quot;output * dpms on&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fi fi &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;0 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;On lock, it immediately locks my desktop (by sending a SIGUSR1 to swayidle, the program that manages locking on the Sway window manager)&lt;/li&gt; &lt;li&gt;On unlock, it first sees if it can authenticate using pamtester without interaction (when no Yubikey is inserted or if the key is invalid, pamtester asks for a password). If it can, it kills the lockscreen and turns on all displays using Sway WM protocols.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;The final result is amazingly convenient, and has successfully made me remember to pull out my Yubikey when leaving my computer unattended more than once&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;! Mission success.&lt;/p&gt; &lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt; &lt;ol&gt; &lt;li id=&quot;fn:3&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;I’ve significantly downgraded this statement in severity after some excellent comments on Hacker News have pointed out that (1) &lt;a href=&quot;https://news.ycombinator.com/item?id:24192390&quot;&gt;stealing a Yubikey is incredibly unlikely unless you’re a person of interest&lt;/a&gt;; (2) &lt;a href=&quot;https://news.ycombinator.com/item?id:24192138&quot;&gt;even if you have the Yubikey, you still can’t directly extract e.g. a private key&lt;/a&gt;; and (3) a &lt;a href=&quot;https://news.ycombinator.com/item?id:24190313&quot;&gt;Yubikey protects against SSH/GPG fraud because it can require a PIN and lock out over time&lt;/a&gt;. Case in point, Yubikeys are good. I’d argue that it’s still not good to have your key stolen (e.g. perhaps if you’re targeted by a government/&lt;a href=&quot;https://news.ycombinator.com/item?id:24194081&quot;&gt;industrial espionage&lt;/a&gt;, or the malicious significant other attack, where they know your password and can steal your key for 2FA if unattended), but I see that it’s not as much of a risk as I originally thought. &lt;a href=&quot;#fnref:3&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;You might call it Yubikey: Coronavirus Edition. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;Yes, yes, I know there’s not too much of a danger because we’re all stuck at home right now. But who knows – maybe this will be helpful when we &lt;em&gt;eventually&lt;/em&gt; get back on campus. &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/div&gt; </description> <pubDate>Sun, 16 Aug 2020 15:29:28 +0000</pubDate> <link>https://kliu.io/post/yubico-magic-unlock/</link> <guid isPermaLink="true">https://kliu.io/post/yubico-magic-unlock/</guid> </item> <item> <title>How does &quot;Send all to voicemail&quot; actually work, anyway?</title> <description>&lt;p&gt;&lt;em&gt;(Disclaimer: I’m not a mobile network engineer. I made this post after some Googling, because it feels like there’s a lot of complexity in mobile networks that even most computer people don’t talk about!)&lt;/em&gt;&lt;/p&gt; &lt;p&gt;Recently, due to increased robocalls and other spam, I’ve decided to switch all of my calling to a Google Voice account I own, whose number appears to be on far fewer contact lists than the number given to me by Mint Mobile, my SIM provider. To do this, I wanted to send all calls on my old number to a voicemail box explaining to call me at the other number. At first, I tried to see if my phone could block calls itself, but failing to find anything, I looked for something on the carrier level.&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://www.reddit.com/r/mintmobile/comments/behwyb/unconditional_call_forwarding/&quot;&gt;Google reveals&lt;/a&gt; that two magic phone numbers will accomplish this for me:&lt;/p&gt; &lt;blockquote&gt; &lt;ul&gt; &lt;li&gt;Send All To Voicemail - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;**21*18056377456#&lt;/code&gt;&lt;/li&gt; &lt;li&gt;Allow Calls - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;##21#&lt;/code&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/blockquote&gt; &lt;p&gt;I dialed the first number, and lo and behold, all my calls go to voicemail. But how does this work, anyway?&lt;/p&gt; &lt;h2 id=&quot;man-machine-interface-codess&quot;&gt;Man-Machine Interface codess&lt;/h2&gt; &lt;p&gt;The first thing I noticed is that when I called either of the two numbers above, Android gave me a toast saying “Running MMI code.” Eventually, a popup window would show up saying: “Call forwarding [enabled/disabled].”&lt;/p&gt; &lt;p&gt;Further research reveals that MMI codes, or Man-Machine Codes, have actually been established since the 2G mobile specification was created. Here’s a list from a &lt;a href=&quot;https://books.google.com/books?id=uR03kPNyx5UC&amp;amp;pg=PA263&amp;amp;lpg=PA263&amp;amp;dq=mmi+codes&amp;amp;source=bl&amp;amp;ots=5_Xq1--1ii&amp;amp;sig=ACfU3U3fSwls7kaxx5sDWZ3qFaGKNgqBow&amp;amp;hl=en&amp;amp;sa=X&amp;amp;ved=2ahUKEwi17K3n7JHrAhVJmnIEHQciBkEQ6AEwFnoECBIQAQ#v=onepage&amp;amp;q=mmi%20codes&amp;amp;f=false&quot;&gt;delightfully-old scan by Google Books&lt;/a&gt;:&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://kliu.io/images/call-forwarding-and-mmi/table.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;Essentially, your phone will forward any code it doesn’t know about to your mobile provider, who has servers to handle specific numbered functions. It doesn’t send the actual number to the network though; instead, it &lt;a href=&quot;https://berlin.ccc.de/~tobias/mmi-ussd-ss-codes-explained.html&quot;&gt;gets parsed by the phone and sent out as ASN.1&lt;/a&gt;. (That link also explains the difference between USSD and MMI codes, which is a big rabbit hole that I don’t want to get into.)&lt;/p&gt; &lt;p&gt;“Unconditional call forwarding” is Service Code 21, as visible in the Send All to Voicemail number: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;**21*18056377456#&lt;/code&gt;. It looks like the second parameter after the asterisks is the number to forward to, and &lt;a href=&quot;https://800notes.com/Phone.aspx/1-805-637-7456?&quot;&gt;1-805-637-7456&lt;/a&gt; is T-Mobile’s voicemail box.&lt;/p&gt; &lt;p&gt;Mystery solved! “Send to voicemail” just instructs the network to forward all calls to a voicemail box’s number. It looks like the Allow Calls one just deletes the call forwarding rule.&lt;/p&gt; </description> <pubDate>Mon, 10 Aug 2020 23:56:54 +0000</pubDate> <link>https://kliu.io/post/call-forwarding-and-mmi/</link> <guid isPermaLink="true">https://kliu.io/post/call-forwarding-and-mmi/</guid> </item> <item> <title>Peeking at user agents for fun and profit</title> <description>&lt;p&gt;HTTP &lt;a href=&quot;https://en.wikipedia.org/wiki/User_agent&quot;&gt;user agents&lt;/a&gt; provide a glimpse into the great variety of the internet. I have a slightly embarrassing habit of staring at my webserver access logs in the minutes (or hours) after I publish a post, just to see how much traffic it gets, but in the process I’ve noticed a few interesting things.&lt;/p&gt; &lt;h2 id=&quot;exploring-hacker-news-reposters&quot;&gt;Exploring Hacker News reposters&lt;/h2&gt; &lt;p&gt;As it turns out, posting on &lt;a href=&quot;https://news.ycombinator.com&quot;&gt;Hacker News&lt;/a&gt; nets your website a lot of hits just from bots reposting new Hacker News content around the internet, even if nobody actually reads your post.&lt;/p&gt; &lt;p&gt;Here’s a sample from yesterday’s &lt;a href=&quot;https://kliu.io/post/tailscale-pretty-cool/&quot;&gt;Tailscale post&lt;/a&gt;:&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[01/Aug/2020:15:51:49 +0000] &quot;Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/16.2.2&quot; [01/Aug/2020:15:51:50 +0000] &quot;Go-http-client/2.0&quot; [01/Aug/2020:15:51:52 +0000] &quot;Mozilla/5.0 (compatible; Discordbot/2.0; +https://discordapp.com)&quot; [01/Aug/2020:15:51:54 +0000] &quot;TelegramBot (like TwitterBot)&quot; [01/Aug/2020:15:52:01 +0000] &quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/538.1 (KHTML, like Gecko) wkhtmltoimage Safari/538.1&quot; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Just from these few lines, we can infer that:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Someone has built a Node.js daemon to scrape new HN posts using &lt;a href=&quot;https://github.com/jsdom/jsdom&quot;&gt;jsdom&lt;/a&gt;;&lt;/li&gt; &lt;li&gt;There’s a go bot crawling every post;&lt;/li&gt; &lt;li&gt;Somewhere out there, there’s a Discord server with a bot posting HN (thus triggering Discord’s preview bot);&lt;/li&gt; &lt;li&gt;There’s a Telegram group crawling HN as well.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;This isn’t terribly practical, but I find it fascinating to see just how interconnected the Internet is, and how one action (my post on Hacker News) immediately spurs a flurry of bot activity from people all over the world.&lt;/p&gt; &lt;h2 id=&quot;finding-out-how-many-people-are-reading&quot;&gt;Finding out how many people are reading&lt;/h2&gt; &lt;p&gt;RSS readers also make requests, of course, to check for new posts. (Self-plug: if you’re interested, please subscribe via RSS.) It turns out, though, that many readers also report the &lt;em&gt;number of subscribers&lt;/em&gt; in their user agent, as remarked upon by &lt;a href=&quot;https://jvns.ca/blog/2018/02/20/measuring-blog-success/&quot;&gt;Julia Evans&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;A snippet of my logs:&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[03/Aug/2020:18:47:00 +0000] &quot;GET /index.xml HTTP/1.1&quot; 304 0 &quot;-&quot; &quot;Liferea/1.12.6 (Linux; https://lzone.de/liferea/) AppleWebKit (KHTML, like Gecko)&quot; [03/Aug/2020:18:58:31 +0000] &quot;HEAD /index.xml HTTP/1.1&quot; 200 0 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.120 Safari/537.36&quot; [03/Aug/2020:19:54:24 +0000] &quot;GET /index.xml HTTP/1.1&quot; 304 0 &quot;-&quot; &quot;Feedly/1.0 (+http://www.feedly.com/fetcher.html; 5 subscribers; like FeedFetcher-Google)&quot; [03/Aug/2020:20:01:51 +0000] &quot;GET /index.xml HTTP/1.1&quot; 304 0 &quot;-&quot; &quot;Tiny Tiny RSS/20.08-2b50aaed6 (http://tt-rss.org/)&quot; [03/Aug/2020:20:06:03 +0000] &quot;GET /index.xml HTTP/1.1&quot; 200 15148 &quot;-&quot; &quot;Krzana bot&quot; [03/Aug/2020:20:19:03 +0000] &quot;GET /index.xml HTTP/1.1&quot; 304 0 &quot;-&quot; &quot;Feedbin feed-id:1637164 - 1 subscribers&quot; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;From this, we can tell:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Someone’s using Liferea as an RSS reader! Pretty cool.&lt;/li&gt; &lt;li&gt;5 people are subscribed on Feedly! Hi! And 1 subscriber on Feedbin.&lt;/li&gt; &lt;li&gt;There are also some other readers, like TinyTinyRSS (which I only recognize because of &lt;a href=&quot;https://utcc.utoronto.ca/~cks/space/blog/web/MyIfModifiedSinceHack&quot;&gt;Chris Siebenmann’s post about it&lt;/a&gt;).&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;This seems like a good way to monitor how the blog is doing over time! I’m honestly surprised that anyone at all is interested enough in this site to subscribe, so I’m happy.&lt;/p&gt; &lt;p&gt;Now, if you’ll excuse me, I’m going to go stare at some more user agents.&lt;/p&gt; &lt;p&gt;&lt;em&gt;This post is 3/100 in my goal to write 100 blog posts in a year.&lt;/em&gt;&lt;/p&gt; </description> <pubDate>Sat, 01 Aug 2020 15:52:23 +0000</pubDate> <link>https://kliu.io/post/peeking-user-agents/</link> <guid isPermaLink="true">https://kliu.io/post/peeking-user-agents/</guid> </item> <item> <title>Tailscale is Pretty Cool</title> <description>&lt;p&gt;&lt;em&gt;This post is 2/100 in my goal to write 100 blog posts in a year.&lt;/em&gt;&lt;/p&gt; &lt;p&gt;Tailscale is, quite frankly, awesome. Through the magic of WireGuard and automatic NAT hole-punching, it creates a virtual private network between servers, laptops, and phones that adapts automatically as you change locations in the real world.&lt;/p&gt; &lt;h2 id=&quot;how-do-you-use-it&quot;&gt;How Do You Use It?&lt;/h2&gt; &lt;p&gt;Well, you sign up for an account (which typically uses Google/other SSO), and then &lt;a href=&quot;https://tailscale.com/download&quot;&gt;install it&lt;/a&gt; (they have packages for every main operating system). You login with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo tailscale up&lt;/code&gt;, and then you have a new, static IP address on your very own virtual network that never changes. It’s similar to &lt;a href=&quot;https://tinc-vpn.org/&quot;&gt;Tinc&lt;/a&gt; (another mesh VPN) in usage and &lt;a href=&quot;https://wireguard.com&quot;&gt;WireGuard&lt;/a&gt; (a high-speed VPN &amp;amp; encryption protocol) in implementation, but without having to manually push server keys to each server’s configuration directory.&lt;/p&gt; &lt;p&gt;Here’s an example:&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kevin@you:~ » ip a s tailscale0 59: tailscale0: &amp;lt;POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP&amp;gt; mtu 1280 qdisc fq state UNKNOWN group default qlen 500 link/none inet 100.65.99.106/32 scope global tailscale0 valid_lft forever preferred_lft forever inet6 fe80::7513:6301:cc50:ac0d/64 scope link stable-privacy valid_lft forever preferred_lft forever kevin@you:~ » ping rem.i.kliu.io PING rem.i.kliu.io (100.66.41.4) 56(84) bytes of data. 64 bytes from 100.66.41.4 (100.66.41.4): icmp_seq=1 ttl=64 time=0.984 ms 64 bytes from 100.66.41.4 (100.66.41.4): icmp_seq=2 ttl=64 time=1.11 ms ^C --- rem.i.kliu.io ping statistics --- 2 packets transmitted, 2 received, 0% packet loss, time 1001ms rtt min/avg/max/mdev: 0.984/1.047/1.111/0.063 ms &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;That’s me pinging one of my home servers from my laptop over Tailscale. Granted, right now (thank you COVID!) I’m on the same network as my home server, so there isn’t much benefit to Tailscale, but even if I were on the other side of the world, I could still directly ping my home server with the same commands.&lt;/p&gt; &lt;h2 id=&quot;how-i-use-it&quot;&gt;How I Use It&lt;/h2&gt; &lt;p&gt;Of course, memorizing all of those &lt;a href=&quot;https://www.tailscale.com/kb/1015/100.x-addresses&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;100.64.0.0/10&lt;/code&gt;&lt;/a&gt; addresses is pretty hard. To keep track of them all, I’ve set up DNS under a subdomain (i.kliu.io) pointing to all my servers. DNS records don’t have to point to public IP addresses, so you can &lt;a href=&quot;https://tailscale.com/kb/1054/dns?q=DNS&quot;&gt;literally just use the DNS server you’re already using for your public website&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Right now, I use it primarily for interactive SSH access. In the future, I’m also hoping to make an IP camera network out of some old phones, with each phone hooked into the Tailscale network!&lt;/p&gt; &lt;h2 id=&quot;when-i-wouldnt-use-it&quot;&gt;When I Wouldn’t Use It&lt;/h2&gt; &lt;p&gt;Unfortunately, &lt;a href=&quot;https://github.com/tailscale/tailscale/issues/426&quot;&gt;it uses the userspace &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wireguard-go&lt;/code&gt; implementation of the WireGuard protocol, not the recently merged in kernel module&lt;/a&gt;. This means that it doesn’t get &lt;em&gt;quite&lt;/em&gt; the maximum performance on high-speed (e.g. Gigabit Ethernet) connections - when transferring files to my home server over NFS, I get around ~25 MB/s (200 Mbps) instead of the line speed maximum of 1 Gbps. So that, coupled with the fact that it’s &lt;em&gt;really&lt;/em&gt; hard in systemd to create a mount that waits for Tailscale to start first, means that I typically don’t use Tailscale for file mounting.&lt;/p&gt; &lt;p&gt;Another issue with using a subdomain of *.i.kliu.io for my Tailscale hosts is that if I want to run any private web services over Tailscale, I won’t be able to access them using their pretty hostname because of &lt;a href=&quot;https://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security&quot;&gt;HTTP Strict Transport Security&lt;/a&gt;. The gist is as follows: I have enforced that my site and all subdomains present valid HTTPS encryption. However, you can’t get a valid certificate for a domain that isn’t on the public internet.&lt;/p&gt; &lt;p&gt;I could solve this by creating a self-signed certificate with a custom root Certificate Authority, and then adding that root CA to each of my computer’s certificate stores to trust it, but that seems like a lot of hassle when I could just host the service publicly and use Let’s Encrypt instead.&lt;/p&gt; &lt;p&gt;(Tailscale people: if you have any tips or ideas here, I’d love to hear about it!)&lt;/p&gt; </description> <pubDate>Sat, 01 Aug 2020 15:26:28 +0000</pubDate> <link>https://kliu.io/post/tailscale-pretty-cool/</link> <guid isPermaLink="true">https://kliu.io/post/tailscale-pretty-cool/</guid> </item> <item> <title>Why Have Exposure Notifications Failed?</title> <description>&lt;p&gt;Note: this post will provide a fairly US-centric view on exposure notifications and the surrounding sentiment. Much of what I say here isn’t likely to be true in other countries.&lt;/p&gt; &lt;p&gt;Exposure notifications, or contact tracing apps, have failed. It’s been &lt;em&gt;months&lt;/em&gt; since I wrote &lt;a href=&quot;&quot;&gt;my previous post on contact tracing&lt;/a&gt;, and yet here’s what I see when I try to download an app:&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://kliu.io/images/2020-07-30-exposure-notifications-failed/no-apps.png&quot; alt=&quot;A screenshot reading &amp;quot;There aren&apos;t currently any contact tracing apps in your area that are endorsed by local or national authorities.&amp;quot;&quot; /&gt;&lt;/p&gt; &lt;p&gt;And I’m not alone.&lt;/p&gt; &lt;h2 id=&quot;problem-1-no-apps-exist-in-the-us&quot;&gt;Problem #1: No Apps Exist (in the US)&lt;/h2&gt; &lt;p&gt;Thanks to the inaction of the federal government, there is no national policy for exposure notification. That leaves it up to the states, and according to 9to5Mac, just &lt;strong&gt;4 of 50 states&lt;/strong&gt; have said that they’ll use an exposure notification app.&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; Essentially, most people in the US can’t get an app at all.&lt;/p&gt; &lt;p&gt;And because of privacy concerns, even though Apple and Google have already deployed Exposure Notifications tracing technology to billions of devices&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;, anyone who hasn’t installed an app and opted in will not have exposure notifications active, so they are effectively locked out of digital contact tracing. When you consider that for herd protection, scientists suggest that &lt;a href=&quot;&quot;&gt;60% of the population needs to opt in&lt;/a&gt;, this effectively makes digital contact tracing worthless in the US except in highly localized areas.&lt;/p&gt; &lt;p&gt;And even if an app &lt;em&gt;is&lt;/em&gt; available…&lt;/p&gt; &lt;h2 id=&quot;problem-2-nobody-installs-the-app&quot;&gt;Problem #2: Nobody Installs the App&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;https://eclecticlight.co/2020/07/25/smartphone-contact-tracing-has-failed-everywhere/&quot;&gt;The Eclectic Light Company blog tells it well&lt;/a&gt;. The highest uptake worldwide has been Iceland, at 40%&lt;sup id=&quot;fnref:3&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:3&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;; in the US, numbers haven’t even gotten that high. North Dakota was the first to launch a contact tracing app, called Care19. However, as of June 11, less than 5% of the state had downloaded the app&lt;sup id=&quot;fnref:4&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:4&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;. Why is this?&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;The app isn’t mandated. For example, India has made downloading their app mandatory to return to work and use public transit, netting it 100 million unique users since release&lt;sup id=&quot;fnref:4:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:4&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;. China has used similar tactics to boost uptake of their apps as well.&lt;/p&gt; &lt;p&gt;Of course, a mandatory app may seem a little too totalitarian in the United States. (I argue that, if made open source and auditable, it wouldn’t be, but in any case it would be politically infeasible.) Instead, Harvard Business Review has suggested that we could boost voluntary uptake by using a similar strategy to Facebook and other social media apps: target specific and local communities first, such as families, schools, or other areas of gathering.&lt;sup id=&quot;fnref:3:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:3&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; The key point is to create &lt;em&gt;targeted&lt;/em&gt; momentum and then scale out from there, rather than releasing broadly but indiscriminately.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;The user experience of an app sucks. First, you have to &lt;em&gt;know&lt;/em&gt; that there’s an app available in your region, which I suspect most people dont. Then, you have to find your specific app (often not distinguished in the store by your state) and download it. Many smartphone users have difficulties installing an app (low storage space, broken app store…), much less remembering to even go install it when they have little individual incentive. It would be better if Google &amp;amp; Apple could &lt;strong&gt;implement (completely private!) contact tracing and a UI for exposure notifications in the operating system&lt;/strong&gt;, so that users wouldn’t have to download an app.&lt;sup id=&quot;fnref:5&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:5&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;5&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;other-problems&quot;&gt;Other Problems&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;Some have said (e.g. the UK) that Bluetooth tracing is not very accurate. One improvement in this area is &lt;a href=&quot;https://www.novid.org/&quot;&gt;NOVID&lt;/a&gt;, an app that uses ultrasonic to obtain sub-meter accuracy. Unfortunately, the app isn’t open source and as of July 30 only has “10,000+” downloads on Google Play, so it again has little chance of taking off.&lt;/li&gt; &lt;li&gt;People are mistrustful of contact tracing apps, despite Google &amp;amp; Apples’s protocol literally being designed to protect privacy at the expense of actually working. (See this Forbes article, which criticizes the protocol for &lt;a href=&quot;https://www.forbes.com/sites/zakdoffman/2020/06/19/how-apple-and-google-created-this-contact-tracing-disaster/#30a805247ca2&quot;&gt;shutting down innovation on contact tracing technologies&lt;/a&gt;.) Perhaps a well-aimed advertisement campaign could fix this, emphasizing the security and privacy guarantees that any contact tracing app would provide.&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;what-do-we-do-from-here&quot;&gt;What Do We Do From Here?&lt;/h2&gt; &lt;p&gt;It’s a tough problem, most of it being political rather than technological. (It reminds me of &lt;a href=&quot;https://www.gwern.net/Holy-wars#&quot;&gt;the well-known problem of coordination in technology&lt;/a&gt;.) On a personal level, obviously I’d recommend downloading the nearest app if available and telling all your friends to do so as well. Creating a local community of people equipped with contact tracing apps would be a good place to start.&lt;/p&gt; &lt;p&gt;On a national level, I’m obviously not very qualified to talk about concrete next steps, but generally, here’s what I think we need:&lt;/p&gt; &lt;ol&gt; &lt;li&gt;Google &amp;amp; Apple should be more aggressive in pushing exposure notifications and enabling it even if the user doesn’t install an app. This should be supplemented with advertisements and news articles showing that it doesn’t infringe on personal privacy.&lt;/li&gt; &lt;li&gt;The US needs a more coordinated tracing response. Considering our failing track record on almost every aspect of the pandemic, this one seems especially remote, but we need a unified system for both digital and perhaps physical contact tracing.&lt;/li&gt; &lt;/ol&gt; &lt;p&gt;&lt;a href=&quot;https://www.digitaltrends.com/news/big-tech-congress-antitrust-hearing-live-news-google-apple-amazon-facebook/&quot;&gt;Good luck&lt;/a&gt;. &lt;a href=&quot;https://www.nytimes.com/interactive/2020/us/coronavirus-us-cases.html?action:click&amp;amp;module:Top%20Stories&amp;amp;pgtype:Homepage&quot;&gt;With that&lt;/a&gt;.&lt;/p&gt; &lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt; &lt;ol&gt; &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;https://9to5mac.com/2020/07/13/covid-19-exposure-notification-api-states/ &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;https://www.gsmarena.com/googles_efforts_in_making_android_updates_faster_have_paid_off_android_10_fastest_adopted_update-news-44198.php &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:3&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;https://hbr.org/2020/07/how-to-get-people-to-actually-use-contact-tracing-apps &lt;a href=&quot;#fnref:3&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt; &lt;a href=&quot;#fnref:3:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;sup&gt;2&lt;/sup&gt;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:4&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;https://www.lawfareblog.com/what-ever-happened-digital-contact-tracing &lt;a href=&quot;#fnref:4&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt; &lt;a href=&quot;#fnref:4:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;sup&gt;2&lt;/sup&gt;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:5&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;To those of you worried about privacy concerns, I remind you that TikTok has been downloaded 175 milion times in the US. And TikTok is run by a Chinese company that is &lt;em&gt;probably&lt;/em&gt; selling all your location data and sensitive information. If we can sacrifice total privacy for 7-second meme videos, maybe we can accept sharing a little (anonymous) data to save lives? &lt;a href=&quot;#fnref:5&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/div&gt; </description> <pubDate>Thu, 30 Jul 2020 14:44:30 +0000</pubDate> <link>https://kliu.io/post/why-have-exposure-notifications-failed/</link> <guid isPermaLink="true">https://kliu.io/post/why-have-exposure-notifications-failed/</guid> </item> <item> <title>We Need to Embrace Exposure Notifications</title> <description>&lt;p&gt;To reopen the world, we need effective contact tracing. &lt;a href=&quot;https://www.cdc.gov/coronavirus/2019-ncov/php/principles-contact-tracing.html&quot;&gt;According to the CDC&lt;/a&gt;:&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;Contact tracing, a core disease control measure employed by local and state health department personnel for decades, is a key strategy for preventing further spread of COVID-19.&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;And our smartphones will be the key. With &lt;a href=&quot;https://www.google.com/covid19/exposurenotifications/&quot;&gt;Apple and Google’s Exposure Notifications protocol&lt;/a&gt;, we can get automated and effective contact tracing. And we don’t have to lose our privacy while we’re at it.&lt;/p&gt; &lt;h2 id=&quot;clearing-up-some-misconceptions&quot;&gt;Clearing Up Some Misconceptions&lt;/h2&gt; &lt;h3 id=&quot;myth-exposure-notifications-send-your-data-to-googleapplethe-government&quot;&gt;Myth: Exposure Notifications Send Your Data to Google/Apple/the Government.&lt;/h3&gt; &lt;p&gt;It doesn’t. &lt;a href=&quot;https://covid19-static.cdn-apple.com/applications/covid19/current/static/contact-tracing/pdf/ExposureNotification-FAQv1.1.pdf&quot;&gt;Google and Apple won’t receive any user identifiers or location data&lt;/a&gt;. In fact, location data is expressly prohibited. Instead, your phone emits a Bluetooth ping to other phones with a random and variable identifier, and if you test positive with COVID-19, your identifiers get added to a list of Known Infected Identifiers provided by a public health authority. &lt;strong&gt;Your name and other information aren’t included&lt;/strong&gt;, so you can’t be identified.&lt;/p&gt; &lt;h3 id=&quot;myth-it-will-let-the-government-surveil-us-all&quot;&gt;Myth: It Will Let the Government Surveil Us All&lt;/h3&gt; &lt;p&gt;Not really. As seen above, Google/Apple’s system doesn’t send any information to a central authority unless you’ve been infected, and even if you are, the central authority doesn’t know anything about you (your name, etc.).&lt;/p&gt; &lt;p&gt;It’s also opt-in: users have to &lt;strong&gt;explicitly turn it on&lt;/strong&gt; in order for this whole system to activate.&lt;/p&gt; &lt;h3 id=&quot;myth-it-wont-help-fight-the-spread-of-the-coronavirus&quot;&gt;Myth: It Won’t Help Fight the Spread of the Coronavirus&lt;/h3&gt; &lt;p&gt;Hopefully false, if we can get the technology in the hands of enough people.&lt;/p&gt; &lt;p&gt;In order to be effective, you don’t need 100% uptake. &lt;a href=&quot;https://www.wsj.com/articles/apps-to-track-the-new-coronavirus-have-an-old-problem-getting-the-downloads-11588115728&quot;&gt;“Just” 60% of people need to opt in&lt;/a&gt; for the system to work well. I say “just” because, considering that (1) you’ll need to download a public health authority app; (2) &lt;a href=&quot;https://arstechnica.com/tech-policy/2020/04/half-of-americans-wont-trust-contact-tracing-apps-new-poll-finds/&quot;&gt;half of Americans don’t trust contact tracing&lt;/a&gt;; and (3) &lt;a href=&quot;https://arstechnica.com/tech-policy/2020/04/2-billion-phones-cannot-use-google-and-apple-contract-tracing-tech/&quot;&gt;2 billion phones are too old to use it&lt;/a&gt;, 60% uptake is going to be a nightmare. That’s why, if you’re technically-minded, you need to &lt;strong&gt;tell your friends and family to enable Exposure Notifications and download your local app&lt;/strong&gt; when it comes out.&lt;/p&gt; &lt;p&gt;Even if we don’t get to 60%, an &lt;a href=&quot;https://www.fastcompany.com/90497860/contact-tracing-apps-are-on-the-way-will-they-help-us-get-back-to-normal&quot;&gt;Oxford study still found that lower levels of use can make a difference&lt;/a&gt;. In the context of minimizing cases and flattening the curve, it can still be helpful.&lt;/p&gt; &lt;h3 id=&quot;the-reality&quot;&gt;The Reality&lt;/h3&gt; &lt;p&gt;There are some legitimate problems with Apple and Google’s technology.&lt;/p&gt; &lt;p&gt;Although Google’s final plan is to introduce Exposure Notifications as an OS update, it is initially &lt;a href=&quot;https://www.forbes.com/sites/davidphelan/2020/05/07/apple-google-exposure-notification-latest-news--will-britains-nhs-u-turn/#37293f17849a&quot;&gt;being bundled into Google Play services&lt;/a&gt;, closed-source and proprietary software running on most (but not all) Android phones. This is because &lt;a href=&quot;https://www.theverge.com/2019/9/4/20847758/google-android-update-problem-pie-q-treble-mainline&quot;&gt;Android updates are notoriously slow to reach end-user devices&lt;/a&gt; (only 8.2% of phones have Google’s latest update, Android 10).&lt;/p&gt; &lt;p&gt;However, starting in Google Play services means the initial code won’t be open source, preventing external audits for vulnerabilities or privacy concerns. (&lt;a href=&quot;https://github.com/microg/android_packages_apps_GmsCore/issues/1057&quot;&gt;Hardcore open-source purists also won’t get the technology.&lt;/a&gt;) Apple’s implementation will similarly be closed-source, although that’s less surprising given that much of iOS is entirely closed source.&lt;/p&gt; &lt;p&gt;There’s also the issue of reliability: after all, just because two phones can talk to each other doesn’t mean their owners really are in close physical contact.&lt;/p&gt; &lt;p&gt;Still, given the potential, I think it’s going to be at least somewhat helpful. We should embrace it and push for greater transparency as we go.&lt;/p&gt; &lt;h2 id=&quot;what-about-alternative-frameworks-nhs-etc&quot;&gt;What About Alternative Frameworks? (NHS, etc.)&lt;/h2&gt; &lt;p&gt;The &lt;a href=&quot;https://www.theguardian.com/technology/2020/apr/16/nhs-in-standoff-with-apple-and-google-over-coronavirus-tracing&quot;&gt;UK’s National Health Service&lt;/a&gt; has publicly rejected Google and Apple’s protocol because it &lt;em&gt;doesn’t&lt;/em&gt; create a centralized list of contacts. Although a centralized approach also has benefits, if you’re looking for privacy, Google &amp;amp; Apple’s protocol is the way to go.&lt;/p&gt; &lt;h2 id=&quot;what-we-need-to-do&quot;&gt;What We Need to Do&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;Follow the news on contact tracing and make sure your phone is up to date with the latest software.&lt;/li&gt; &lt;li&gt;When Exposure Notifications is out, &lt;strong&gt;turn it on&lt;/strong&gt; and tell your friends to do the same. Download your local public health authority’s app and help get to that magical 60% number.&lt;/li&gt; &lt;li&gt;Be mindful of the privacy and surveillance concerns around Exposure Notifications, but push back on them when they are simply untrue.&lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;see-also&quot;&gt;See Also&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;3Blue1Brown’s &lt;a href=&quot;https://www.youtube.com/watch?v=D__UaR5MQao&quot;&gt;video on Contact Tracing&lt;/a&gt;, via Nicky Case.&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://www.eff.org/deeplinks/2020/04/apple-and-googles-covid-19-exposure-notification-api-questions-and-answers&quot;&gt;The EFF’s Questions &amp;amp; Answers&lt;/a&gt; on the Exposure Notification API.&lt;/li&gt; &lt;li&gt;NPR: &lt;a href=&quot;https://www.npr.org/2020/05/13/855096163/apple-and-googles-contact-tracing-technology-raises-privacy-concerns&quot;&gt;Apple, Google In Conflict With States Over Contact-Tracing Tech&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; </description> <pubDate>Sat, 16 May 2020 15:54:14 +0000</pubDate> <link>https://kliu.io/post/embrace-contact-tracing/</link> <guid isPermaLink="true">https://kliu.io/post/embrace-contact-tracing/</guid> </item> <item> <title>First Look at TeaVM: Java on the Browser?</title> <description>&lt;p&gt;Recently, as part of work on &lt;a href=&quot;https://github.com/knoweth/knoweth&quot;&gt;Knoweth&lt;/a&gt; (an Anki-esque spaced-repetition flashcard reviewer; see &lt;a href=&quot;https://insensitive.co/posts/2019/03/anki-redesign-and-development-part-1/&quot;&gt;my friend’s blog&lt;/a&gt; for more information), I have been experimenting with some lesser-used web technology: &lt;a href=&quot;http://teavm.org&quot;&gt;TeaVM&lt;/a&gt;, an ahead-of-time compiler that converts Java bytecode to JavaScript or WebAssembly.&lt;/p&gt; &lt;p&gt;This technology, to put it mildly, is ridiculously impressive. To be clear, this isn’t “I compiled the entire Java Virtual Machine to WebAssembly; please wait for my hundred-megabyte download” (although &lt;a href=&quot;https://www.leaningtech.com/cheerpj/&quot;&gt;that also exists&lt;/a&gt;); this compiles your Java code straight to JS, only including the minimum standard library required. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;System.out.println&lt;/code&gt;? More like &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;console.log&lt;/code&gt;. Some more features:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;It reimplements a good subset of the Java standard library so it can be compiled to JavaScript&lt;/li&gt; &lt;li&gt;Through &lt;a href=&quot;http://teavm.org/docs/flavour/templates.html&quot;&gt;Flavour&lt;/a&gt;, it has a full-on single-page-application/HTML templating framework, supporting REST, routing, and custom components&lt;/li&gt; &lt;li&gt;It has a &lt;a href=&quot;https://stackoverflow.com/questions/42466164/how-i-deploy-my-libgdx-project-to-html-js-using-teavm&quot;&gt;libgdx backend&lt;/a&gt; to run libgdx applications on the browser&lt;/li&gt; &lt;li&gt;It’s ridiculously lean&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;So considering the sizable proportion of developers who &lt;a href=&quot;https://www.semitwist.com/mirror/node-js-is-cancer.html&quot;&gt;hate JavaScript&lt;/a&gt; with a burning passion (for entirely understandable reasons), can TeaVM offer a compelling alternative?&lt;/p&gt; &lt;h2 id=&quot;trying-it-out&quot;&gt;Trying it Out&lt;/h2&gt; &lt;p&gt;[UPDATE 2019-08-10: This post has been lightly revised due to the &lt;a href=&quot;https://www.reddit.com/r/java/comments/cm3oh9/first_look_at_teavm_java_on_the_browser/ew3fksr/&quot;&gt;comments of konsoletyper, TeaVM’s developer&lt;/a&gt;. One thing not mentioned in this post is how willing the developer is to provide help ;).]&lt;/p&gt; &lt;p&gt;Let’s try it out:&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ mvn compile ... [INFO] ------------------------------------------------------------------------ [INFO] BUILD FAILURE [INFO] ------------------------------------------------------------------------ [INFO] Total time: 5.393 s [INFO] Finished at: 2019-08-04T19:12:03-04:00 [INFO] Final Memory: 23M/39M [INFO] ------------------------------------------------------------------------ [ERROR] Failed to execute goal org.teavm:teavm-maven-plugin:0.5.1:compile (default-cli) on project knoweth: Unexpected error occured: ConcurrentModificationException -&amp;gt; [Help 1] [ERROR] [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch. [ERROR] Re-run Maven using the -X switch to enable full debug logging. [ERROR] &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;(Elided are hours of me trying to figure out how Maven works, since I’ve never used it before. I won’t count that against TeaVM. If you’re stuck, my understanding is that teavm’s maven plugin runs by default in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;package&lt;/code&gt; phase? So running &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mvn compile&lt;/code&gt; actually won’t run it by default.)&lt;/p&gt; &lt;p&gt;I’ll save you the &lt;a href=&quot;https://github.com/konsoletyper/teavm/issues/363&quot;&gt;Googling&lt;/a&gt; and just say that TeaVM 0.5.1 (the latest stable release) is incompatible with Java 11, which I am using. The solution is to use their development &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0.6.0-dev-*&lt;/code&gt; versions from bintray. Fine - it would have been nice if TeaVM had a stable release for Java 11 (and it should be better documented), but it works.&lt;/p&gt; &lt;h2 id=&quot;rest-client-issues&quot;&gt;REST Client Issues&lt;/h2&gt; &lt;p&gt;Here is some code that will call a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/login&lt;/code&gt; endpoint with a JSON body of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;{ &quot;username&quot;: &quot;bob&quot;, &quot;password&quot;: &quot;bob&quot; }&lt;/code&gt;:&lt;/p&gt; &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;UserService&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;@Path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;login&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;@POST&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;login&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;LoginBody&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;UserView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;UserService&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RESTClient&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;factory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;UserService&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;createResource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BackgroundWorker&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;worker&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BackgroundWorker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;worker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Should make a POST request to /login with JSON body&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;login&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LoginBody&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;bob&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;bob&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printStackTrace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;del&gt;Issue #1 is that you &lt;em&gt;need&lt;/em&gt; to make the login request from a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;BackgroundWorker&lt;/code&gt;.&lt;/del&gt; In this &lt;em&gt;specific case&lt;/em&gt;, you need to make this request from an asynchronous context. In this example, it uses a BackgroundWorker, a class that Flavour uses to run background methods and update bound templates afterward, leveraging TeaVM’s async support. (That’s right: TeaVM added green threads to Java. In JavaScript.) This is not documented on their &lt;a href=&quot;http://teavm.org/docs/flavour/rest-client.html&quot;&gt;REST client docs&lt;/a&gt; (although it is on their &lt;a href=&quot;http://teavm.org/docs/flavour/advanced-ui-components.html&quot;&gt;advanced UI components page&lt;/a&gt; and is explained more on &lt;a href=&quot;http://teavm.org/docs/runtime/coroutines.html&quot;&gt;their coroutines page&lt;/a&gt;); I only figured it out by coming across a chance Google Groups post.&lt;/p&gt; &lt;p&gt;The second issue is this one:&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://kliu.io/images/2019-07-22-knoweth-teavm-first-look/java-exception-thrown.png&quot; alt=&quot;fetch request fails with Java exception thrown&quot; /&gt;&lt;/p&gt; &lt;p&gt;An error whose &lt;del&gt;undescriptiveness rivals babel-transpiled asynchronous JavaScript code&lt;/del&gt;. (Correction: Babel code is actually worse, since it doesn’t preserve the stack trace, while TeaVM does so.) The core issue is actually &lt;em&gt;not&lt;/em&gt; a Java exception; rather, it’s a JavaScript error from within standard library &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RequestImpl&lt;/code&gt; code, hence why it provides no description of what the error is. The REST client attempts, in 0.6.0-dev-816, to call a JS function that does not exist (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;otfri_RequestImpl_send0&lt;/code&gt;), and it fails with the JavaScript error &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;otfri_RequestImpl_send0 is not defined&lt;/code&gt;. &lt;del&gt;The only way I’ve been able to fix this is to roll back to Java 8 + TeaVM 0.5.1, which fixes the problem.&lt;/del&gt; The underlying problem is that you can’t use unstable TeaVM (0.6.0) with stable Flavour (0.1.0); upgrade Flavour to 0.2.0-dev. (Issue reference: &lt;a href=&quot;https://github.com/konsoletyper/teavm/issues/407&quot;&gt;#407&lt;/a&gt;.)&lt;/p&gt; &lt;p&gt;As a whole, there also doesn’t appear to be a way to make low-level HTTP requests (e.g. setting headers) other than by writing JavaScript bindings in Java (which is also woefully underdocumented.)&lt;/p&gt; &lt;h2 id=&quot;in-summary&quot;&gt;In Summary&lt;/h2&gt; &lt;p&gt;You may have seen a theme here. TeaVM is incredible technology, but it is unfortunately extremely underdocumented, likely due to having less real-world usage than most frameworks. You will find almost nothing on StackOverflow or blog posts about it; your best recourse is typically reading the source code.&lt;/p&gt; &lt;p&gt;I would still recommend you try it out, though! And perhaps file a few issues, or write some documentation. When it works, it is amazing to use.&lt;/p&gt; &lt;p&gt;(Disclaimer: this is a &lt;em&gt;first look&lt;/em&gt;. If any experienced TeaVM users would like to chime in with corrections or advice, please do so in the comments!)&lt;/p&gt; </description> <pubDate>Sun, 04 Aug 2019 00:00:40 +0000</pubDate> <link>https://kliu.io/post/knoweth-teavm-first-look/</link> <guid isPermaLink="true">https://kliu.io/post/knoweth-teavm-first-look/</guid> </item> <item> <title>Tracking Down a Fifteen-Hour Email Delay from Outlook &amp; Office 365</title> <description>&lt;p&gt;For the past month, emails have been (seemingly randomly) delayed to our mail server.&lt;/p&gt; &lt;p&gt;At first, I suspected a configuration problem on our side: it’s quite hard to run a decent mail server, after all. But further confusing things was the fact that &lt;em&gt;not all emails were delayed&lt;/em&gt;. The majority, in fact, were not.&lt;/p&gt; &lt;p&gt;Eventually, I noticed a common thread – the delayed emails all came from Outlook or Office365.&lt;/p&gt; &lt;p&gt;So I went to the darkest, deepest corners of the internet, from which few return: Office 365 tech support.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;2019-04-18 - Initial inquiry&lt;/li&gt; &lt;li&gt;2019-05-11 - Issue resolved&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;After a few weeks of back-and-forth, sending example email headers from those that got delayed, I eventually received the following advice:&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;Hello Kevin,&lt;/p&gt; &lt;p&gt;Thank you for your email.&lt;/p&gt; &lt;p&gt;Is it possible to remove CNAME of [***]? If yes then remove the CNAME and then check still you are receiving email with delay.&lt;/p&gt; &lt;p&gt;Please check and reply to this email with the outcome. I will wait for your reply.&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;Previously, I had the DNS set up like so: MX (mail) –&amp;gt; CNAME (alias to another domain) –&amp;gt; A (IP address of mail server). As suggested, I changed it to MX –&amp;gt; A, retested, and… it worked!&lt;/p&gt; &lt;p&gt;In summary: Outlook doesn’t like MX records pointing to CNAMEs, apparently. I’d be interested to know if this is standard behavior at all or if it’s just a Microsoft peculiarity (especially since all other mail servers appear to be fine with a CNAME.)&lt;/p&gt; &lt;p&gt;edit: Actually, &lt;a href=&quot;https://exchangepedia.com/2006/12/should-mx-record-point-to-cname-records-aliases.html&quot;&gt;upon further research&lt;/a&gt; it appears that RFC 2181 &lt;em&gt;does&lt;/em&gt; mandate pointing an MX directly to an A record. So Outlook is in the clear here (although most mail servers apparently handle MX -&amp;gt; CNAME -&amp;gt; A alright). An interesting quirk to keep in mind!&lt;/p&gt; </description> <pubDate>Sat, 11 May 2019 13:40:23 +0000</pubDate> <link>https://kliu.io/post/outlook-email-debugging/</link> <guid isPermaLink="true">https://kliu.io/post/outlook-email-debugging/</guid> </item> <item> <title>Building Tensorflow + AMD Radeon Open Compute for Ivy Bridge: The Rabbit Hole of CPU Flags and PCIe Features</title> <description>&lt;p&gt;I tried to install Tensorflow to learn machine learning, but ended up learning a lot more about hardware and the inner workings of AMD’s ROCm stack.&lt;/p&gt; &lt;p&gt;So, Tensorflow: it’s the premiere machine learning library, but unfortunately it only supports NVIDIA GPUs natively. This was problematic for me, as I own an RX 580. Thankfully, AMD has developed &lt;a href=&quot;https://github.com/ROCmSoftwarePlatform/tensorflow-upstream&quot;&gt;a port&lt;/a&gt; running on their own Radeon Open Compute (ROCm) architecture. They even have a docker image!&lt;/p&gt; &lt;p&gt;So I &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker run&lt;/code&gt;‘d it, passing through the GPU as directed&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;, and:&lt;/p&gt; &lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@2a2a4a430b33:/root# python3 Python 3.5.2 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;default, Nov 23 2017, 16:37:01&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;GCC 5.4.0 20160609] on linux Type &lt;span class=&quot;s2&quot;&gt;&quot;help&quot;&lt;/span&gt;, &lt;span class=&quot;s2&quot;&gt;&quot;copyright&quot;&lt;/span&gt;, &lt;span class=&quot;s2&quot;&gt;&quot;credits&quot;&lt;/span&gt; or &lt;span class=&quot;s2&quot;&gt;&quot;license&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;more information. &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; import tensorflow 2018-10-21 14:20:43.079860: F tensorflow/core/platform/cpu_feature_guard.cc:37] The TensorFlow library was compiled to use AVX2 instructions, but these aren&lt;span class=&quot;s1&quot;&gt;&apos;t available on your machine. Aborted (core dumped) root@2a2a4a430b33:/root# &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Hm.&lt;/p&gt; &lt;p&gt;Initially, this error seemed inscrutable to me. I actually spent a long time looking through the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cpu_feature_guard.cc&lt;/code&gt; file for where the error was located to see if it was a bug, but then I &lt;em&gt;actually read the error&lt;/em&gt;. To reiterate:&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;The TensorFlow library was compiled to use AVX2 instructions, but these aren’t available on your machine.&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Advanced_Vector_Extensions#Advanced_Vector_Extensions_2&quot;&gt;Thanks to the power of Wikipedia&lt;/a&gt;, I realized that AVX2 is a CPU extension only introduced in Intel’s Haswell processors in 2013. And my computer has an i7-4820k, an Ivy Bridge processor. The question then became: Why would AMD compile a generic Docker image only for newer Intel CPUs?&lt;/p&gt; &lt;p&gt;However, looking closer on ROCm’s &lt;a href=&quot;https://rocm.github.io/ROCmInstall.html#supported-cpus&quot;&gt;Getting Started page&lt;/a&gt; reveals that it requires not just a supported GPU, but a supported &lt;em&gt;CPU&lt;/em&gt;:&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;GFX8 GPUs require PCIe 3.0 with PCIe atomics in order to run ROCm. In particular, the CPU and every active PCIe point between the CPU and GPU require support for PCIe 3.0 and PCIe atomics.&lt;/p&gt; &lt;p&gt;If you attempt to run ROCm on a system without proper PCIe atomic support, you may see an error in the kernel log (dmesg):&lt;/p&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kfd: skipped device 1002:7300, PCI rejects atomics&lt;/code&gt;&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;(PCIe atomics, by the way, are used by ROCm as a way of ordering/synchronizing memory operations. You really &lt;a href=&quot;https://github.com/RadeonOpenCompute/ROCm/issues/157&quot;&gt;can’t run ROCm without them&lt;/a&gt;.)&lt;/p&gt; &lt;p&gt;My heart sunk. The getting started page, at the time, only listed Intel Haswells and above as supporting PCIe atomics. That’s probably why the Tensorflow image was only compiled for Haswell and up. I checked &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dmesg | grep kfd&lt;/code&gt; to see the bad news and&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kfd kfd: Initialized module kfd kfd: Allocated 3969056 bytes on gart kfd kfd: added device 1002:67df &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;&lt;em&gt;Oh&lt;/em&gt;. That did not seem like an error due to a lack of PCIe atomics. I went to Intel’s &lt;a href=&quot;https://www.intel.com/content/dam/www/public/us/en/documents/datasheets/4th-gen-core-i7-lga2011-datasheet-vol-1.pdf&quot;&gt;datasheet&lt;/a&gt; for the 4820k, where I saw (p. 11):&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;https://kliu.io/images/2019-04-21-pcie-atomics.png&quot; alt=&quot;Intel datasheet showing PCIe atomic support on Ivy Bridge&quot; /&gt;&lt;/p&gt; &lt;p&gt;🤔 So clearly my CPU &lt;em&gt;did&lt;/em&gt; support atomics. Time for a &lt;a href=&quot;https://github.com/ROCmSoftwarePlatform/tensorflow-upstream/issues/217&quot;&gt;bug report&lt;/a&gt; (which ultimately resulted in &lt;a href=&quot;https://github.com/RadeonOpenCompute/ROCm/commit/23beff10b8916c5302ff0df6750c3585e01ea517&quot;&gt;AMD updating its documentation&lt;/a&gt; about supported CPUs).&lt;/p&gt; &lt;p&gt;A few months passed, and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sunway513&lt;/code&gt; (an AMD employee? probably?) suggested I try to build Tensorflow, from source, using the dev Docker image. So I tried that, but then I saw that the build tools were &lt;em&gt;also&lt;/em&gt; compiled using invalid (Haswell) instructions. Eventually, I managed to build Tensorflow starting from a clean &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ubuntu:16.04&lt;/code&gt; image, installing ROCm manually, and then building Tensorflow as usual (with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-march=native&lt;/code&gt;).&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Python 3.5.2 (default, Nov 12 2018, 13:43:14) [GCC 5.4.0 20160609] on linux Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information. &amp;gt;&amp;gt;&amp;gt; import tensorflow as tf &amp;gt;&amp;gt;&amp;gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Victory!&lt;/p&gt; &lt;p&gt;(PS: After this whole ordeal, I tried AMD’s Docker image again. And, surprise, it Just Works now. So maybe they changed their build system in some way to stop compiling for Haswell. And yes, this makes this whole expedition pointless, but at least it was a learning experience!)&lt;/p&gt; &lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt; &lt;ol&gt; &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--device=/dev/kfd --device=/dev/dri --group-add video --cap-add=SYS_PTRACE --security-opt seccomp=unconfined&lt;/code&gt; &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/div&gt; </description> <pubDate>Sun, 21 Apr 2019 14:31:43 +0000</pubDate> <link>https://kliu.io/post/tensorflow-amd-rocm-ivy-bridge/</link> <guid isPermaLink="true">https://kliu.io/post/tensorflow-amd-rocm-ivy-bridge/</guid> </item> <item> <title>A Tale of Two Servers</title> <description>&lt;!-- +++ layout = &quot;post&quot; title = &quot;A Tale of Two Servers&quot; date = 2019-04-02T16:01:45-04:00 summary = &quot;Two servers, one IP address. Featuring SNI proxies, SSH, and everyone&apos;s favorite service to self-host: mail!&quot; draft = false toc = false categories = [] tags = [&quot;tech&quot;, &quot;homelab&quot;] images = [] +++ --&gt; &lt;p&gt;Recently (due to causes unimportant in this blog post), I was tasked with running a self-hosted server in my residence. Now, as a seasoned Linux system administrator (heh), this would normally be a fairly easy task. The server had to run web services, mail, and GitLab, which typically would only necessitate some port forwarding.&lt;/p&gt; &lt;p&gt;Complicating things, however, was the fact that I &lt;em&gt;already had&lt;/em&gt; a server in my house, which also runs web services, mail, and GitLab. Since residential homes are usually only given one IP address, mine being no exception, this meant I had to find some way to host both servers on one IP address.&lt;/p&gt; &lt;p&gt;Here’s how I did it!&lt;/p&gt; &lt;h2 id=&quot;web---port-80-443&quot;&gt;Web - Port 80, 443&lt;/h2&gt; &lt;p&gt;Web servers are typically pretty easy to proxy. Set up &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nginx&lt;/code&gt; and a few virtual hosts, and voilá.&lt;/p&gt; &lt;p&gt;Unfortunately, both servers (hosting &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;potatofrom.space&lt;/code&gt; and an unnamed sister site&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;) use HTTPS with Let’s Encrypt. With a reverse proxy setup like &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nginx&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nginx&lt;/code&gt; would have to manage all TLS certificates for both sites, which is not what I wanted, since I wanted both servers to maintain separate configurations. (It is a distinct possibility that I might end up giving back or decommissioning the other server at some point.) This sort of setup would also require manual updates whenever I added a subdomain on either &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;potatofrom.space&lt;/code&gt; or the other site.&lt;/p&gt; &lt;p&gt;I had some ridiculous ideas at first, namely to use a Raspberry Pi or other device with nginx and two wildcard Let’s Encrypt certificates (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.potatofrom.space&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.&amp;lt;redacted&amp;gt;&lt;/code&gt;) for simpler proxying. But that too seemed annoying.&lt;/p&gt; &lt;p&gt;Then came &lt;a href=&quot;https://github.com/dlundquist/sniproxy&quot;&gt;SNIPROXY&lt;/a&gt;!&lt;/p&gt; &lt;p&gt;If you have never had the good fortune of coming across this incredible piece of software, it lets you proxy TLS, without providing certificates. If you’re like me, this blew your mind.&lt;/p&gt; &lt;p&gt;Here’s how it works:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;To support hosting multiple (sub)domains on one IP with different certificates, TLS has an extension called Server Name Indication (SNI), where the client sends the name of the server they want to connect to in their handshake.&lt;/li&gt; &lt;li&gt;The SNI message is &lt;em&gt;unencrypted&lt;/em&gt;. It happens before setting up encryption!&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;(This design also leads to &lt;a href=&quot;https://blog.cloudflare.com/esni/&quot;&gt;some privacy issues&lt;/a&gt;.)&lt;/p&gt; &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sniproxy&lt;/code&gt; hence looks at that first SNI message, then sets up the connection with the backend server &lt;em&gt;without touching encryption at all&lt;/em&gt;. After that first handshake, it merely relays encrypted ciphertext. The upshot of this is that each of my servers can keep on managing their own Let’s Encrypt certificates, minimizing workflow disruptions. It also makes &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sniproxy&lt;/code&gt; configuration much simpler. Here’s my config right now:&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;error_log { # Log to the daemon syslog facility syslog daemon } # Global access log for all listeners access_log { # Log to the daemon syslog facility syslog daemon } listen 80 { proto http } listen 443 { proto tls } table { ^((.+\.)|())potatofrom\.space$ 10.99.0.1 ^((.+\.)|())redacted\.com$ 192.168.1.3 } &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Wonderfully simple.&lt;/p&gt; &lt;h2 id=&quot;gitlab---port-22&quot;&gt;GitLab - Port 22&lt;/h2&gt; &lt;p&gt;A self-hosted GitLab instance generally runs an SSH daemon port 22, so that users can clone repositories through SSH.&lt;/p&gt; &lt;p&gt;Unfortunately, &lt;a href=&quot;https://serverfault.com/questions/34552/is-there-a-name-based-virtual-host-ssh-reverse-proxy&quot;&gt;it appears SSH does not send the hostname as part of the protocol&lt;/a&gt;, so hosting multiple SSH servers on the same port is impossible.&lt;/p&gt; &lt;p&gt;After some consideration, I decided to just turn off SSH for https://gitlab.potatofrom.space, since I’m the only one using it. I switched instead to cloning through HTTPS using personal access tokens.&lt;/p&gt; &lt;h2 id=&quot;mail---ports-25-110-143-465-587-993-995-oh-my&quot;&gt;Mail - Ports 25, 110, 143, 465, 587, 993, 995, Oh My!&lt;/h2&gt; &lt;p&gt;Mail servers use… a lot of ports. Thankfully, only some of them are really necessary.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;strong&gt;25 (SMTP)&lt;/strong&gt;: This port &lt;em&gt;must&lt;/em&gt; be publicly-accessible by other mail servers so they can deliver mail to you. This port is &lt;em&gt;not configurable&lt;/em&gt;, no matter how much &lt;a href=&quot;https://tools.ietf.org/html/rfc6186&quot;&gt;RFC 6186&lt;/a&gt; might tell you otherwise.&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt; &lt;li&gt;&lt;strong&gt;587 (SMTP)&lt;/strong&gt;: Mail submission for email clients. This has to be different from port 25, since &lt;a href=&quot;https://forums.att.com/t5/AT-T-Internet-Features/Unblock-port-25/td-p/4343420&quot;&gt;a&lt;/a&gt; &lt;a href=&quot;https://forums.verizon.com/t5/Verizon-net-Email/Verizon-is-blocking-TCP-port-25/td-p/851629&quot;&gt;lot&lt;/a&gt; &lt;a href=&quot;https://community.cisco.com/t5/routing/block-outbound-port-25/td-p/1198091&quot;&gt;of&lt;/a&gt; &lt;a href=&quot;https://www.xfinity.com/support/articles/email-port-25-no-longer-supported&quot;&gt;internet service providers&lt;/a&gt; block port 25 for users. You can change it from 587, though; you just need to reconfigure your mail clients if so.&lt;/li&gt; &lt;li&gt;&lt;strong&gt;143 (IMAP)&lt;/strong&gt;: Modern mail retrieval for mail clients.&lt;sup id=&quot;fnref:3&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:3&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; Again, this port can be changed, but you will need to reconfigure mail clients.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Resolving the conflict on ports 143 and 587 was simple enough: I forwarded 143 and 587 to the new server and forwarded 10143 and 10587 to my old one. Port 25 was annoying, though.&lt;/p&gt; &lt;p&gt;In the end, I figured the best way to do it would be to have the new server forward any mail it got for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;potatofrom.space&lt;/code&gt; to my personal mailserver. This way, the new server would be the sole public-facing presence on my IP, but I would still be able to receive mail on both servers. Since the new server uses &lt;a href=&quot;https://mailu.io&quot;&gt;Mailu&lt;/a&gt;, which has a “relayed domains” feature, I figured this would be fairly easy.&lt;/p&gt; &lt;p&gt;As with all things mail, it was not.&lt;/p&gt; &lt;p&gt;To all the poor souls (or future mes) facing the same problem, here’s the magic incantation:&lt;/p&gt; &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;smtpd_client_restrictions = permit_mynetworks, reject_non_fqdn_sender, reject_unknown_sender_domain, reject_unknown_recipient_domain, permit &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;In &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postfix.cf&lt;/code&gt;. Note the &lt;a href=&quot;https://github.com/Mailu/Mailu/blob/94e42c9b520557387520622306af0a23458a0ccb/core/postfix/conf/main.cf#L93&quot;&gt;lack of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;reject_unverified_recipient&lt;/code&gt;&lt;/a&gt;. This stopped Mailu from preemptively rejecting the mail &lt;em&gt;even though&lt;/em&gt; I had explicitly configured it for relaying.&lt;/p&gt; &lt;p&gt;Then, I added the Mailu server’s IP address as a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TrustedHosts&lt;/code&gt; on my own mailserver, so that it wouldn’t get tilted and reject what it was receiving.&lt;/p&gt; &lt;p&gt;And voilá! A few server reconfigurations on my side, and both servers were now working.&lt;/p&gt; &lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt; &lt;p&gt;Should you do this? Probably not. &lt;a href=&quot;https://www.verizon.com/business&quot;&gt;Just get another IP address&lt;/a&gt;. Or, uh, don’t have two servers?&lt;/p&gt; &lt;p&gt;If, however, you are like me, and want the lowest-cost, least-disruption solution… well, here you are.&lt;/p&gt; &lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt; &lt;ol&gt; &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;Yes, I know basically anyone could find out what the other server is, considering I literally said it’s on the same IP address as the website you’re looking at now. Still, for confidentiality’s sake I’d rather not say. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;I haven’t read RFC 6186 too closely, but I &lt;em&gt;think&lt;/em&gt; it’s usage of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_submission&lt;/code&gt; SRV record may only be for mail user agents to follow, not other mail servers. In any case, I wouldn’t want to rely on it when forty years of backwards compatibility argue against it. &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;li id=&quot;fn:3&quot; role=&quot;doc-endnote&quot;&gt; &lt;p&gt;Please don’t use POP3. &lt;a href=&quot;#fnref:3&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/div&gt; </description> <pubDate>Tue, 02 Apr 2019 20:01:45 +0000</pubDate> <link>https://kliu.io/post/a-tale-of-two-servers/</link> <guid isPermaLink="true">https://kliu.io/post/a-tale-of-two-servers/</guid> </item> </channel> </rss>